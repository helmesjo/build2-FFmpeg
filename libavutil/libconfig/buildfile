using autoconf

cpu = [string] $c.target.cpu
tgt_win32 = [bool] ($c.target.system == 'win32-msvc')
tgt_macos = [bool] ($c.target.system == 'darwin')

./: lib{config}: h{config config_cpu config_components}

h{config}: in{config}
{
  FFMPEG_CONFIGURATION = "\"$c.target.system\""
  FFMPEG_LICENSE = "\"LGPL version 2.1 or later\""

  CONFIG_AVDEVICE                      = 1 #($config.libavutil.avdevice ? 1 : 0)
  CONFIG_AVFILTER                      = 1 #($config.libavutil.avfilter ? 1 : 0)
  CONFIG_SWSCALE                       = 1 #($config.libavutil.swscale ? 1 : 0)
  CONFIG_POSTPROC                      = 1 #($config.libavutil.postproc ? 1 : 0)
  CONFIG_AVFORMAT                      = 1 #($config.libavutil.avformat ? 1 : 0)
  CONFIG_AVCODEC                       = 1 #($config.libavutil.avcodec ? 1 : 0)
  CONFIG_SWRESAMPLE                    = 1 #($config.libavutil.swresample ? 1 : 0)
  CONFIG_AVUTIL                        = 1 #($config.libavutil.avutil ? 1 : 0)

  CONFIG_THIS_YEAR                     = 2024
  CONFIG_DOC                           = ($config.libavutil.doc ? 1 : 0)
  CONFIG_HTMLPAGES                     = ($config.libavutil.htmlpages ? 1 : 0)
  CONFIG_MANPAGES                      = ($config.libavutil.manpages ? 1 : 0)
  CONFIG_PODPAGES                      = ($config.libavutil.podpages ? 1 : 0)
  CONFIG_TXTPAGES                      = ($config.libavutil.txtpages ? 1 : 0)
  CONFIG_AVIO_HTTP_SERVE_FILES_EXAMPLE = ($config.libavutil.avio_http_serve_files_example ? 1 : 0)
  CONFIG_AVIO_LIST_DIR_EXAMPLE         = ($config.libavutil.avio_list_dir_example ? 1 : 0)
  CONFIG_AVIO_READ_CALLBACK_EXAMPLE    = ($config.libavutil.avio_read_callback_example ? 1 : 0)
  CONFIG_DECODE_AUDIO_EXAMPLE          = ($config.libavutil.decode_audio_example ? 1 : 0)
  CONFIG_DECODE_FILTER_AUDIO_EXAMPLE   = ($config.libavutil.decode_filter_audio_example ? 1 : 0)
  CONFIG_DECODE_FILTER_VIDEO_EXAMPLE   = ($config.libavutil.decode_filter_video_example ? 1 : 0)
  CONFIG_DECODE_VIDEO_EXAMPLE          = ($config.libavutil.decode_video_example ? 1 : 0)
  CONFIG_DEMUX_DECODE_EXAMPLE          = ($config.libavutil.demux_decode_example ? 1 : 0)
  CONFIG_ENCODE_AUDIO_EXAMPLE          = ($config.libavutil.encode_audio_example ? 1 : 0)
  CONFIG_ENCODE_VIDEO_EXAMPLE          = ($config.libavutil.encode_video_example ? 1 : 0)
  CONFIG_EXTRACT_MVS_EXAMPLE           = ($config.libavutil.extract_mvs_example ? 1 : 0)
  CONFIG_FILTER_AUDIO_EXAMPLE          = ($config.libavutil.filter_audio_example ? 1 : 0)
  CONFIG_HW_DECODE_EXAMPLE             = ($config.libavutil.hw_decode_example ? 1 : 0)
  CONFIG_MUX_EXAMPLE                   = ($config.libavutil.mux_example ? 1 : 0)
  CONFIG_QSV_DECODE_EXAMPLE            = ($config.libavutil.qsv_decode_example ? 1 : 0)
  CONFIG_REMUX_EXAMPLE                 = ($config.libavutil.remux_example ? 1 : 0)
  CONFIG_RESAMPLE_AUDIO_EXAMPLE        = ($config.libavutil.resample_audio_example ? 1 : 0)
  CONFIG_SCALE_VIDEO_EXAMPLE           = ($config.libavutil.scale_video_example ? 1 : 0)
  CONFIG_SHOW_METADATA_EXAMPLE         = ($config.libavutil.show_metadata_example ? 1 : 0)
  CONFIG_TRANSCODE_AAC_EXAMPLE         = ($config.libavutil.transcode_aac_example ? 1 : 0)
  CONFIG_TRANSCODE_EXAMPLE             = ($config.libavutil.transcode_example ? 1 : 0)
  CONFIG_VAAPI_ENCODE_EXAMPLE          = ($config.libavutil.vaapi_encode_example ? 1 : 0)
  CONFIG_VAAPI_TRANSCODE_EXAMPLE       = ($config.libavutil.vaapi_transcode_example ? 1 : 0)
  CONFIG_QSV_TRANSCODE_EXAMPLE         = ($config.libavutil.qsv_transcode_example ? 1 : 0)
  CONFIG_AVISYNTH                      = ($config.libavutil.avisynth ? 1 : 0)
  CONFIG_FREI0R                        = ($config.libavutil.frei0r ? 1 : 0)
  CONFIG_LIBCDIO                       = ($config.libavutil.libcdio ? 1 : 0)
  CONFIG_LIBDAVS2                      = ($config.libavutil.libdavs2 ? 1 : 0)
  CONFIG_LIBDVDNAV                     = ($config.libavutil.libdvdnav ? 1 : 0)
  CONFIG_LIBDVDREAD                    = ($config.libavutil.libdvdread ? 1 : 0)
  CONFIG_LIBRUBBERBAND                 = ($config.libavutil.librubberband ? 1 : 0)
  CONFIG_LIBVIDSTAB                    = ($config.libavutil.libvidstab ? 1 : 0)
  CONFIG_LIBX264                       = ($config.libavutil.libx264 ? 1 : 0)
  CONFIG_LIBX265                       = ($config.libavutil.libx265 ? 1 : 0)
  CONFIG_LIBXAVS                       = ($config.libavutil.libxavs ? 1 : 0)
  CONFIG_LIBXAVS2                      = ($config.libavutil.libxavs2 ? 1 : 0)
  CONFIG_LIBXVID                       = ($config.libavutil.libxvid ? 1 : 0)
  CONFIG_DECKLINK                      = ($config.libavutil.decklink ? 1 : 0)
  CONFIG_LIBFDK_AAC                    = ($config.libavutil.libfdk_aac ? 1 : 0)
  CONFIG_LIBTLS                        = ($config.libavutil.libtls ? 1 : 0)
  CONFIG_GMP                           = ($config.libavutil.gmp ? 1 : 0)
  CONFIG_LIBARIBB24                    = ($config.libavutil.libaribb24 ? 1 : 0)
  CONFIG_LIBLENSFUN                    = ($config.libavutil.liblensfun ? 1 : 0)
  CONFIG_LIBOPENCORE_AMRNB             = ($config.libavutil.libopencore_amrnb ? 1 : 0)
  CONFIG_LIBOPENCORE_AMRWB             = ($config.libavutil.libopencore_amrwb ? 1 : 0)
  CONFIG_LIBVO_AMRWBENC                = ($config.libavutil.libvo_amrwbenc ? 1 : 0)
  CONFIG_MBEDTLS                       = ($config.libavutil.mbedtls ? 1 : 0)
  CONFIG_RKMPP                         = ($config.libavutil.rkmpp ? 1 : 0)
  CONFIG_LIBSMBCLIENT                  = ($config.libavutil.libsmbclient ? 1 : 0)
  CONFIG_CHROMAPRINT                   = ($config.libavutil.chromaprint ? 1 : 0)
  CONFIG_GCRYPT                        = ($config.libavutil.gcrypt ? 1 : 0)
  CONFIG_GNUTLS                        = ($config.libavutil.gnutls ? 1 : 0)
  CONFIG_JNI                           = ($config.libavutil.jni ? 1 : 0)
  CONFIG_LADSPA                        = ($config.libavutil.ladspa ? 1 : 0)
  CONFIG_LCMS2                         = ($config.libavutil.lcms2 ? 1 : 0)
  CONFIG_LIBAOM                        = ($config.libavutil.libaom ? 1 : 0)
  CONFIG_LIBARIBCAPTION                = ($config.libavutil.libaribcaption ? 1 : 0)
  CONFIG_LIBASS                        = ($config.libavutil.libass ? 1 : 0)
  CONFIG_LIBBLURAY                     = ($config.libavutil.libbluray ? 1 : 0)
  CONFIG_LIBBS2B                       = ($config.libavutil.libbs2b ? 1 : 0)
  CONFIG_LIBCACA                       = ($config.libavutil.libcaca ? 1 : 0)
  CONFIG_LIBCELT                       = ($config.libavutil.libcelt ? 1 : 0)
  CONFIG_LIBCODEC2                     = ($config.libavutil.libcodec2 ? 1 : 0)
  CONFIG_LIBDAV1D                      = ($config.libavutil.libdav1d ? 1 : 0)
  CONFIG_LIBDC1394                     = ($config.libavutil.libdc1394 ? 1 : 0)
  CONFIG_LIBFLITE                      = ($config.libavutil.libflite ? 1 : 0)
  CONFIG_LIBFONTCONFIG                 = ($config.libavutil.libfontconfig ? 1 : 0)
  CONFIG_LIBFREETYPE                   = ($config.libavutil.libfreetype ? 1 : 0)
  CONFIG_LIBFRIBIDI                    = ($config.libavutil.libfribidi ? 1 : 0)
  CONFIG_LIBHARFBUZZ                   = ($config.libavutil.libharfbuzz ? 1 : 0)
  CONFIG_LIBGLSLANG                    = ($config.libavutil.libglslang ? 1 : 0)
  CONFIG_LIBGME                        = ($config.libavutil.libgme ? 1 : 0)
  CONFIG_LIBGSM                        = ($config.libavutil.libgsm ? 1 : 0)
  CONFIG_LIBIEC61883                   = ($config.libavutil.libiec61883 ? 1 : 0)
  CONFIG_LIBILBC                       = ($config.libavutil.libilbc ? 1 : 0)
  CONFIG_LIBJACK                       = ($config.libavutil.libjack ? 1 : 0)
  CONFIG_LIBJXL                        = ($config.libavutil.libjxl ? 1 : 0)
  CONFIG_LIBKLVANC                     = ($config.libavutil.libklvanc ? 1 : 0)
  CONFIG_LIBKVAZAAR                    = ($config.libavutil.libkvazaar ? 1 : 0)
  CONFIG_LIBMODPLUG                    = ($config.libavutil.libmodplug ? 1 : 0)
  CONFIG_LIBMP3LAME                    = ($config.libavutil.libmp3lame ? 1 : 0)
  CONFIG_LIBMYSOFA                     = ($config.libavutil.libmysofa ? 1 : 0)
  CONFIG_LIBOPENCV                     = ($config.libavutil.libopencv ? 1 : 0)
  CONFIG_LIBOPENH264                   = ($config.libavutil.libopenh264 ? 1 : 0)
  CONFIG_LIBOPENJPEG                   = ($config.libavutil.libopenjpeg ? 1 : 0)
  CONFIG_LIBOPENMPT                    = ($config.libavutil.libopenmpt ? 1 : 0)
  CONFIG_LIBOPENVINO                   = ($config.libavutil.libopenvino ? 1 : 0)
  CONFIG_LIBOPUS                       = ($config.libavutil.libopus ? 1 : 0)
  CONFIG_LIBPLACEBO                    = ($config.libavutil.libplacebo ? 1 : 0)
  CONFIG_LIBPULSE                      = ($config.libavutil.libpulse ? 1 : 0)
  CONFIG_LIBQRENCODE                   = ($config.libavutil.libqrencode ? 1 : 0)
  CONFIG_LIBQUIRC                      = ($config.libavutil.libquirc ? 1 : 0)
  CONFIG_LIBRABBITMQ                   = ($config.libavutil.librabbitmq ? 1 : 0)
  CONFIG_LIBRAV1E                      = ($config.libavutil.librav1e ? 1 : 0)
  CONFIG_LIBRIST                       = ($config.libavutil.librist ? 1 : 0)
  CONFIG_LIBRSVG                       = ($config.libavutil.librsvg ? 1 : 0)
  CONFIG_LIBRTMP                       = ($config.libavutil.librtmp ? 1 : 0)
  CONFIG_LIBSHADERC                    = ($config.libavutil.libshaderc ? 1 : 0)
  CONFIG_LIBSHINE                      = ($config.libavutil.libshine ? 1 : 0)
  CONFIG_LIBSMBCLIENT                  = ($config.libavutil.libsmbclient ? 1 : 0)
  CONFIG_LIBSNAPPY                     = ($config.libavutil.libsnappy ? 1 : 0)
  CONFIG_LIBSOXR                       = ($config.libavutil.libsoxr ? 1 : 0)
  CONFIG_LIBSPEEX                      = ($config.libavutil.libspeex ? 1 : 0)
  CONFIG_LIBSRT                        = ($config.libavutil.libsrt ? 1 : 0)
  CONFIG_LIBSSH                        = ($config.libavutil.libssh ? 1 : 0)
  CONFIG_LIBSVTAV1                     = ($config.libavutil.libsvtav1 ? 1 : 0)
  CONFIG_LIBTENSORFLOW                 = ($config.libavutil.libtensorflow ? 1 : 0)
  CONFIG_LIBTESSERACT                  = ($config.libavutil.libtesseract ? 1 : 0)
  CONFIG_LIBTHEORA                     = ($config.libavutil.libtheora ? 1 : 0)
  CONFIG_LIBTORCH                      = ($config.libavutil.libtorch ? 1 : 0)
  CONFIG_LIBTWOLAME                    = ($config.libavutil.libtwolame ? 1 : 0)
  CONFIG_LIBUAVS3D                     = ($config.libavutil.libuavs3d ? 1 : 0)
  CONFIG_LIBV4L2                       = ($config.libavutil.libv4l2 ? 1 : 0)
  CONFIG_LIBVMAF                       = ($config.libavutil.libvmaf ? 1 : 0)
  CONFIG_LIBVORBIS                     = ($config.libavutil.libvorbis ? 1 : 0)
  CONFIG_LIBVPX                        = ($config.libavutil.libvpx ? 1 : 0)
  CONFIG_LIBWEBP                       = ($config.libavutil.libwebp ? 1 : 0)
  CONFIG_LIBXEVD                       = ($config.libavutil.libxevd ? 1 : 0)
  CONFIG_LIBXEVE                       = ($config.libavutil.libxeve ? 1 : 0)
  CONFIG_LIBXML2                       = ($config.libavutil.libxml2 ? 1 : 0)
  CONFIG_LIBZIMG                       = ($config.libavutil.libzimg ? 1 : 0)
  CONFIG_LIBZMQ                        = ($config.libavutil.libzmq ? 1 : 0)
  CONFIG_LIBZVBI                       = ($config.libavutil.libzvbi ? 1 : 0)
  CONFIG_LV2                           = ($config.libavutil.lv2 ? 1 : 0)
  CONFIG_MEDIACODEC                    = ($config.libavutil.mediacodec ? 1 : 0)
  CONFIG_OPENAL                        = ($config.libavutil.openal ? 1 : 0)
  CONFIG_OPENGL                        = ($config.libavutil.opengl ? 1 : 0)
  CONFIG_OPENSSL                       = ($config.libavutil.openssl ? 1 : 0)
  CONFIG_POCKETSPHINX                  = ($config.libavutil.pocketsphinx ? 1 : 0)
  CONFIG_VAPOURSYNTH                   = ($config.libavutil.vapoursynth ? 1 : 0)
  CONFIG_ALSA                          = ($config.libavutil.alsa ? 1 : 0)
  CONFIG_APPKIT                        = ($config.libavutil.appkit ? 1 : 0)
  CONFIG_AVFOUNDATION                  = ($config.libavutil.avfoundation ? 1 : 0)
  CONFIG_BZLIB                         = ($config.libavutil.bzlib ? 1 : 0)
  CONFIG_COREIMAGE                     = ($config.libavutil.coreimage ? 1 : 0)
  CONFIG_ICONV                         = ($config.libavutil.iconv ? 1 : 0)
  CONFIG_LIBXCB                        = ($config.libavutil.libxcb ? 1 : 0)
  CONFIG_LIBXCB_SHM                    = ($config.libavutil.libxcb_shm ? 1 : 0)
  CONFIG_LIBXCB_SHAPE                  = ($config.libavutil.libxcb_shape ? 1 : 0)
  CONFIG_LIBXCB_XFIXES                 = ($config.libavutil.libxcb_xfixes ? 1 : 0)
  CONFIG_LZMA                          = ($config.libavutil.lzma ? 1 : 0)
  CONFIG_MEDIAFOUNDATION               = ($config.libavutil.mediafoundation ? 1 : 0)
  CONFIG_METAL                         = ($config.libavutil.metal ? 1 : 0)
  CONFIG_SCHANNEL                      = ($config.libavutil.schannel ? 1 : 0)
  CONFIG_SDL2                          = ($config.libavutil.sdl2 ? 1 : 0)
  CONFIG_SECURETRANSPORT               = ($config.libavutil.securetransport ? 1 : 0)
  CONFIG_SNDIO                         = ($config.libavutil.sndio ? 1 : 0)
  CONFIG_XLIB                          = ($config.libavutil.xlib ? 1 : 0)
  CONFIG_ZLIB                          = ($config.libavutil.zlib ? 1 : 0)
  CONFIG_CUDA_NVCC                     = ($config.libavutil.cuda_nvcc ? 1 : 0)
  CONFIG_CUDA_SDK                      = ($config.libavutil.cuda_sdk ? 1 : 0)
  CONFIG_LIBNPP                        = ($config.libavutil.libnpp ? 1 : 0)
  CONFIG_LIBMFX                        = ($config.libavutil.libmfx ? 1 : 0)
  CONFIG_LIBVPL                        = ($config.libavutil.libvpl ? 1 : 0)
  CONFIG_MMAL                          = ($config.libavutil.mmal ? 1 : 0)
  CONFIG_OMX                           = ($config.libavutil.omx ? 1 : 0)
  CONFIG_OPENCL                        = ($config.libavutil.opencl ? 1 : 0)
  CONFIG_AMF                           = ($config.libavutil.amf ? 1 : 0)
  CONFIG_AUDIOTOOLBOX                  = ($config.libavutil.audiotoolbox ? 1 : 0)
  CONFIG_CUDA                          = ($config.libavutil.cuda ? 1 : 0)
  CONFIG_CUDA_LLVM                     = ($config.libavutil.cuda_llvm ? 1 : 0)
  CONFIG_CUVID                         = ($config.libavutil.cuvid ? 1 : 0)
  CONFIG_D3D11VA                       = ($config.libavutil.d3d11va ? 1 : 0)
  CONFIG_D3D12VA                       = ($config.libavutil.d3d12va ? 1 : 0)
  CONFIG_DXVA2                         = ($config.libavutil.dxva2 ? 1 : 0)
  CONFIG_FFNVCODEC                     = ($config.libavutil.ffnvcodec ? 1 : 0)
  CONFIG_LIBDRM                        = ($config.libavutil.libdrm ? 1 : 0)
  CONFIG_NVDEC                         = ($config.libavutil.nvdec ? 1 : 0)
  CONFIG_NVENC                         = ($config.libavutil.nvenc ? 1 : 0)
  CONFIG_VAAPI                         = ($config.libavutil.vaapi ? 1 : 0)
  CONFIG_VDPAU                         = ($config.libavutil.vdpau ? 1 : 0)
  CONFIG_VIDEOTOOLBOX                  = ($config.libavutil.videotoolbox ? 1 : 0)
  CONFIG_VULKAN                        = ($config.libavutil.vulkan ? 1 : 0)
  CONFIG_V4L2_M2M                      = ($config.libavutil.v4l2_m2m ? 1 : 0)
  CONFIG_FTRAPV                        = ($config.libavutil.ftrapv ? 1 : 0)
  CONFIG_GRAY                          = ($config.libavutil.gray ? 1 : 0)
  CONFIG_HARDCODED_TABLES              = ($config.libavutil.hardcoded_tables ? 1 : 0)
  CONFIG_OMX_RPI                       = ($config.libavutil.omx_rpi ? 1 : 0)
  CONFIG_RUNTIME_CPUDETECT             = ($config.libavutil.runtime_cpudetect ? 1 : 0)
  CONFIG_SAFE_BITSTREAM_READER         = ($config.libavutil.safe_bitstream_reader ? 1 : 0)
  CONFIG_SMALL                         = ($config.libavutil.small ? 1 : 0)
  CONFIG_SWSCALE_ALPHA                 = ($config.libavutil.swscale_alpha ? 1 : 0)
  CONFIG_GPL                           = ($config.libavutil.gpl ? 1 : 0)
  CONFIG_NONFREE                       = ($config.libavutil.nonfree ? 1 : 0)
  CONFIG_VERSION3                      = ($config.libavutil.version3 ? 1 : 0)
  CONFIG_FFPLAY                        = ($config.libavutil.ffplay ? 1 : 0)
  CONFIG_FFPROBE                       = ($config.libavutil.ffprobe ? 1 : 0)
  CONFIG_FFMPEG                        = ($config.libavutil.ffmpeg ? 1 : 0)
  CONFIG_DWT                           = ($config.libavutil.dwt ? 1 : 0)
  CONFIG_ERROR_RESILIENCE              = ($config.libavutil.error_resilience ? 1 : 0)
  CONFIG_FAAN                          = ($config.libavutil.faan ? 1 : 0)
  CONFIG_FAST_UNALIGNED                = ($config.libavutil.fast_unaligned ? 1 : 0)
  CONFIG_LSP                           = ($config.libavutil.lsp ? 1 : 0)
  CONFIG_PIXELUTILS                    = ($config.libavutil.pixelutils ? 1 : 0)
  CONFIG_NETWORK                       = ($config.libavutil.network ? 1 : 0)
  CONFIG_AUTODETECT                    = ($config.libavutil.autodetect ? 1 : 0)
  CONFIG_FONTCONFIG                    = ($config.libavutil.fontconfig ? 1 : 0)
  CONFIG_LARGE_TESTS                   = ($config.libavutil.large_tests ? 1 : 0)
  CONFIG_LINUX_PERF                    = ($config.libavutil.linux_perf ? 1 : 0)
  CONFIG_MACOS_KPERF                   = ($config.libavutil.macos_kperf ? 1 : 0)
  CONFIG_MEMORY_POISONING              = ($config.libavutil.memory_poisoning ? 1 : 0)
  CONFIG_NEON_CLOBBER_TEST             = ($config.libavutil.neon_clobber_test ? 1 : 0)
  CONFIG_OSSFUZZ                       = ($config.libavutil.ossfuzz ? 1 : 0)
  CONFIG_PIC                           = ($config.libavutil.pic ? 1 : 0)
  CONFIG_PTX_COMPRESSION               = ($config.libavutil.ptx_compression ? 1 : 0)
  CONFIG_THUMB                         = ($config.libavutil.thumb ? 1 : 0)
  CONFIG_VALGRIND_BACKTRACE            = ($config.libavutil.valgrind_backtrace ? 1 : 0)
  CONFIG_XMM_CLOBBER_TEST              = ($config.libavutil.xmm_clobber_test ? 1 : 0)
  CONFIG_BSFS                          = ($config.libavutil.bsfs ? 1 : 0)
  CONFIG_DECODERS                      = ($config.libavutil.decoders ? 1 : 0)
  CONFIG_ENCODERS                      = ($config.libavutil.encoders ? 1 : 0)
  CONFIG_HWACCELS                      = ($config.libavutil.hwaccels ? 1 : 0)
  CONFIG_PARSERS                       = ($config.libavutil.parsers ? 1 : 0)
  CONFIG_INDEVS                        = ($config.libavutil.indevs ? 1 : 0)
  CONFIG_OUTDEVS                       = ($config.libavutil.outdevs ? 1 : 0)
  CONFIG_FILTERS                       = ($config.libavutil.filters ? 1 : 0)
  CONFIG_DEMUXERS                      = ($config.libavutil.demuxers ? 1 : 0)
  CONFIG_MUXERS                        = ($config.libavutil.muxers ? 1 : 0)
  CONFIG_PROTOCOLS                     = ($config.libavutil.protocols ? 1 : 0)
  CONFIG_AANDCTTABLES                  = ($config.libavutil.aandcttables ? 1 : 0)
  CONFIG_AC3DSP                        = ($config.libavutil.ac3dsp ? 1 : 0)
  CONFIG_ADTS_HEADER                   = ($config.libavutil.adts_header ? 1 : 0)
  CONFIG_ATSC_A53                      = ($config.libavutil.atsc_a53 ? 1 : 0)
  CONFIG_AUDIO_FRAME_QUEUE             = ($config.libavutil.audio_frame_queue ? 1 : 0)
  CONFIG_AUDIODSP                      = ($config.libavutil.audiodsp ? 1 : 0)
  CONFIG_BLOCKDSP                      = ($config.libavutil.blockdsp ? 1 : 0)
  CONFIG_BSWAPDSP                      = ($config.libavutil.bswapdsp ? 1 : 0)
  CONFIG_CABAC                         = ($config.libavutil.cabac ? 1 : 0)
  CONFIG_CBS                           = ($config.libavutil.cbs ? 1 : 0)
  CONFIG_CBS_AV1                       = ($config.libavutil.cbs_av1 ? 1 : 0)
  CONFIG_CBS_H264                      = ($config.libavutil.cbs_h264 ? 1 : 0)
  CONFIG_CBS_H265                      = ($config.libavutil.cbs_h265 ? 1 : 0)
  CONFIG_CBS_H266                      = ($config.libavutil.cbs_h266 ? 1 : 0)
  CONFIG_CBS_JPEG                      = ($config.libavutil.cbs_jpeg ? 1 : 0)
  CONFIG_CBS_MPEG2                     = ($config.libavutil.cbs_mpeg2 ? 1 : 0)
  CONFIG_CBS_VP8                       = ($config.libavutil.cbs_vp8 ? 1 : 0)
  CONFIG_CBS_VP9                       = ($config.libavutil.cbs_vp9 ? 1 : 0)
  CONFIG_DEFLATE_WRAPPER               = ($config.libavutil.deflate_wrapper ? 1 : 0)
  CONFIG_DIRAC_PARSE                   = ($config.libavutil.dirac_parse ? 1 : 0)
  CONFIG_DNN                           = ($config.libavutil.dnn ? 1 : 0)
  CONFIG_DOVI_RPU                      = ($config.libavutil.dovi_rpu ? 1 : 0)
  CONFIG_DVPROFILE                     = ($config.libavutil.dvprofile ? 1 : 0)
  CONFIG_EVCPARSE                      = ($config.libavutil.evcparse ? 1 : 0)
  CONFIG_EXIF                          = ($config.libavutil.exif ? 1 : 0)
  CONFIG_FAANDCT                       = ($config.libavutil.faandct ? 1 : 0)
  CONFIG_FAANIDCT                      = ($config.libavutil.faanidct ? 1 : 0)
  CONFIG_FDCTDSP                       = ($config.libavutil.fdctdsp ? 1 : 0)
  CONFIG_FMTCONVERT                    = ($config.libavutil.fmtconvert ? 1 : 0)
  CONFIG_FRAME_THREAD_ENCODER          = ($config.libavutil.frame_thread_encoder ? 1 : 0)
  CONFIG_G722DSP                       = ($config.libavutil.g722dsp ? 1 : 0)
  CONFIG_GOLOMB                        = ($config.libavutil.golomb ? 1 : 0)
  CONFIG_GPLV3                         = ($config.libavutil.gplv3 ? 1 : 0)
  CONFIG_H263DSP                       = ($config.libavutil.h263dsp ? 1 : 0)
  CONFIG_H264CHROMA                    = ($config.libavutil.h264chroma ? 1 : 0)
  CONFIG_H264DSP                       = ($config.libavutil.h264dsp ? 1 : 0)
  CONFIG_H264PARSE                     = ($config.libavutil.h264parse ? 1 : 0)
  CONFIG_H264PRED                      = ($config.libavutil.h264pred ? 1 : 0)
  CONFIG_H264QPEL                      = ($config.libavutil.h264qpel ? 1 : 0)
  CONFIG_H264_SEI                      = ($config.libavutil.h264_sei ? 1 : 0)
  CONFIG_HEVCPARSE                     = ($config.libavutil.hevcparse ? 1 : 0)
  CONFIG_HEVC_SEI                      = ($config.libavutil.hevc_sei ? 1 : 0)
  CONFIG_HPELDSP                       = ($config.libavutil.hpeldsp ? 1 : 0)
  CONFIG_HUFFMAN                       = ($config.libavutil.huffman ? 1 : 0)
  CONFIG_HUFFYUVDSP                    = ($config.libavutil.huffyuvdsp ? 1 : 0)
  CONFIG_HUFFYUVENCDSP                 = ($config.libavutil.huffyuvencdsp ? 1 : 0)
  CONFIG_IAMFDEC                       = ($config.libavutil.iamfdec ? 1 : 0)
  CONFIG_IAMFENC                       = ($config.libavutil.iamfenc ? 1 : 0)
  CONFIG_IDCTDSP                       = ($config.libavutil.idctdsp ? 1 : 0)
  CONFIG_IIRFILTER                     = ($config.libavutil.iirfilter ? 1 : 0)
  CONFIG_INFLATE_WRAPPER               = ($config.libavutil.inflate_wrapper ? 1 : 0)
  CONFIG_INTRAX8                       = ($config.libavutil.intrax8 ? 1 : 0)
  CONFIG_ISO_MEDIA                     = ($config.libavutil.iso_media ? 1 : 0)
  CONFIG_IVIDSP                        = ($config.libavutil.ividsp ? 1 : 0)
  CONFIG_JPEGTABLES                    = ($config.libavutil.jpegtables ? 1 : 0)
  CONFIG_LGPLV3                        = ($config.libavutil.lgplv3 ? 1 : 0)
  CONFIG_LIBX262                       = ($config.libavutil.libx262 ? 1 : 0)
  CONFIG_LIBX264_HDR10                 = ($config.libavutil.libx264_hdr10 ? 1 : 0)
  CONFIG_LLAUDDSP                      = ($config.libavutil.llauddsp ? 1 : 0)
  CONFIG_LLVIDDSP                      = ($config.libavutil.llviddsp ? 1 : 0)
  CONFIG_LLVIDENCDSP                   = ($config.libavutil.llvidencdsp ? 1 : 0)
  CONFIG_LPC                           = ($config.libavutil.lpc ? 1 : 0)
  CONFIG_LZF                           = ($config.libavutil.lzf ? 1 : 0)
  CONFIG_ME_CMP                        = ($config.libavutil.me_cmp ? 1 : 0)
  CONFIG_MPEG_ER                       = ($config.libavutil.mpeg_er ? 1 : 0)
  CONFIG_MPEGAUDIO                     = ($config.libavutil.mpegaudio ? 1 : 0)
  CONFIG_MPEGAUDIODSP                  = ($config.libavutil.mpegaudiodsp ? 1 : 0)
  CONFIG_MPEGAUDIOHEADER               = ($config.libavutil.mpegaudioheader ? 1 : 0)
  CONFIG_MPEG4AUDIO                    = ($config.libavutil.mpeg4audio ? 1 : 0)
  CONFIG_MPEGVIDEO                     = ($config.libavutil.mpegvideo ? 1 : 0)
  CONFIG_MPEGVIDEODEC                  = ($config.libavutil.mpegvideodec ? 1 : 0)
  CONFIG_MPEGVIDEOENC                  = ($config.libavutil.mpegvideoenc ? 1 : 0)
  CONFIG_MSMPEG4DEC                    = ($config.libavutil.msmpeg4dec ? 1 : 0)
  CONFIG_MSMPEG4ENC                    = ($config.libavutil.msmpeg4enc ? 1 : 0)
  CONFIG_MSS34DSP                      = ($config.libavutil.mss34dsp ? 1 : 0)
  CONFIG_PIXBLOCKDSP                   = ($config.libavutil.pixblockdsp ? 1 : 0)
  CONFIG_QPELDSP                       = ($config.libavutil.qpeldsp ? 1 : 0)
  CONFIG_QSV                           = ($config.libavutil.qsv ? 1 : 0)
  CONFIG_QSVDEC                        = ($config.libavutil.qsvdec ? 1 : 0)
  CONFIG_QSVENC                        = ($config.libavutil.qsvenc ? 1 : 0)
  CONFIG_QSVVPP                        = ($config.libavutil.qsvvpp ? 1 : 0)
  CONFIG_RANGECODER                    = ($config.libavutil.rangecoder ? 1 : 0)
  CONFIG_RIFFDEC                       = ($config.libavutil.riffdec ? 1 : 0)
  CONFIG_RIFFENC                       = ($config.libavutil.riffenc ? 1 : 0)
  CONFIG_RTPDEC                        = ($config.libavutil.rtpdec ? 1 : 0)
  CONFIG_RTPENC_CHAIN                  = ($config.libavutil.rtpenc_chain ? 1 : 0)
  CONFIG_RV34DSP                       = ($config.libavutil.rv34dsp ? 1 : 0)
  CONFIG_SCENE_SAD                     = ($config.libavutil.scene_sad ? 1 : 0)
  CONFIG_SINEWIN                       = ($config.libavutil.sinewin ? 1 : 0)
  CONFIG_SNAPPY                        = ($config.libavutil.snappy ? 1 : 0)
  CONFIG_SRTP                          = ($config.libavutil.srtp ? 1 : 0)
  CONFIG_STARTCODE                     = ($config.libavutil.startcode ? 1 : 0)
  CONFIG_TEXTUREDSP                    = ($config.libavutil.texturedsp ? 1 : 0)
  CONFIG_TEXTUREDSPENC                 = ($config.libavutil.texturedspenc ? 1 : 0)
  CONFIG_TPELDSP                       = ($config.libavutil.tpeldsp ? 1 : 0)
  CONFIG_VAAPI_1                       = ($config.libavutil.vaapi_1 ? 1 : 0)
  CONFIG_VAAPI_ENCODE                  = ($config.libavutil.vaapi_encode ? 1 : 0)
  CONFIG_VC1DSP                        = ($config.libavutil.vc1dsp ? 1 : 0)
  CONFIG_VIDEODSP                      = ($config.libavutil.videodsp ? 1 : 0)
  CONFIG_VP3DSP                        = ($config.libavutil.vp3dsp ? 1 : 0)
  CONFIG_VP56DSP                       = ($config.libavutil.vp56dsp ? 1 : 0)
  CONFIG_VP8DSP                        = ($config.libavutil.vp8dsp ? 1 : 0)
  CONFIG_WMA_FREQS                     = ($config.libavutil.wma_freqs ? 1 : 0)
  CONFIG_WMV2DSP                       = ($config.libavutil.wmv2dsp ? 1 : 0)

  autoconf.substitutions = HAVE_ALIGNED_MALLOC@HAVE__ALIGNED_MALLOC \
                           HAVE_AS_ARCHEXT_DOTPROD_DIRECTIVE@HAVE_AS_ARCHEXT_DOTPROD \
                           HAVE_AS_ARCHEXT_I8MM_DIRECTIVE@HAVE_AS_ARCHEXT_I8MM \
                           HAVE_AS_FUNC@HAVE_AS_FUNC_DIRECTIVE \
                           HAVE_EBP_AVAILABLE@HAVE_ASM_EBP \
                           HAVE_EBX_AVAILABLE@HAVE_ASM_EBX \
                           HAVE_FAST_FLOAT16@HAVE_F16C \
                           HAVE_INTRINSICS_NEON@HAVE_NEON \
                           HAVE_AS_OBJECT_ARCH@HAVE_AS_OBJECT_ARCH_DIRECTIVE \
                           HAVE_PTHREADS@HAVE_PTHREAD \
                           HAVE_SOCKLEN_T@socklen_t

  HAVE_CDIO_PARANOIA_H                 = ($c.find_system_header("cdio/paranoia/paranoia.h") != [null])
  HAVE_DEV_VIDEO_BKTR_IOCTL_BT848_H    = ($c.find_system_header("bktr/ioctl_bt848.h") != [null])
  HAVE_DEV_VIDEO_METEOR_IOCTL_METEOR_H = ($c.find_system_header("meteor/ioctl_bt848.h") != [null])
  HAVE_ES2_GL_H                        = ($c.find_system_header("GLES2/gl2.h") != [null])
  HAVE_GLXGETPROCADDRESS               = ($c.find_system_header("GL/glx.h") != [null])
  HAVE_GSM_H                           = ($c.find_system_header("gsm.h") != [null])
  HAVE_OPENCV2_CORE_CORE_C_H           = ($c.find_system_header("opencv2/core/core_c.h") != [null])
  HAVE_OPENGL_GL3_H                    = ($c.find_system_header("OpenGL/gl3.h") != [null])
  HAVE_OPENVINO2                       = ($c.find_system_header("openvino/c/openvino.h") != [null])
  HAVE_STRUCT_MFXCONFIGINTERFACE       = ($c.find_system_header("mfx/mfxvideo.h") != [null])
  HAVE_VAAPI_DRM                       = ($c.find_system_header("va/va_drm.h") != [null])
  HAVE_VAAPI_WIN32                     = ($c.find_system_header("va/va_win32.h") != [null])
  HAVE_VAAPI_X11                       = ($c.find_system_header("va/va_x11.h") != [null])
  HAVE_VALGRIND_VALGRIND_H             = ($c.find_system_header("valgrind/valgrind.h") != [null])
  HAVE_VDPAU_X11                       = ($c.find_system_header("vdpau/vdpau_x11.h") != [null])
  HAVE_XMLLINT                         = ($c.find_system_header("libxml/parser.h") != [null])

  #  *nix
  HAVE_LIBDRM_GETFB2 = ($c.find_system_header("drm/drm.h") != [null])

  #  Win32
  ## FFmpeg (incorrectly) assumes that HAVE_BCRYPT implies it's _WIN32
  HAVE_BCRYPT = ($c.find_system_header("bcrypt.h") != [null] && $tgt_win32)
  HAVE_DPI_AWARENESS_CONTEXT   = $tgt_win32
  HAVE_GETMODULEHANDLE         = $tgt_win32
  HAVE_GETPROCESSAFFINITYMASK  = $tgt_win32
  HAVE_GETPROCESSMEMORYINFO    = $tgt_win32
  HAVE_GETPROCESSTIMES         = $tgt_win32
  HAVE_GETSTDHANDLE            = $tgt_win32
  HAVE_GETSYSTEMTIMEASFILETIME = $tgt_win32
  HAVE_IDXGIOUTPUT5            = $tgt_win32
  HAVE_IO_H                    = $tgt_win32
  HAVE_KBHIT                   = $tgt_win32
  HAVE_VIRTUALALLOC            = $tgt_win32
  HAVE_W32THREADS              = $tgt_win32
  HAVE_WGLGETPROCADDRESS       = $tgt_win32
}
# Build options.
#
out_pfx = [dir_path] $out_root/libconfig/
src_pfx = [dir_path] $src_root/libconfig/

c.poptions =+ "-I$out_pfx" "-I$src_pfx"

# Export options.
#
lib{config}:
{
  c.export.poptions += "-I$out_pfx" "-I$src_pfx" -DHAVE_AV_CONFIG_H
}

# For pre-releases use the complete version to make sure they cannot
# be used in place of another pre-release or the final version. See
# the version module for details on the version.* variable values.
#
if $version.pre_release
  lib{config}: bin.lib.version = "-$version.project_id"
else
  lib{config}: bin.lib.version = "-$version.major.$version.minor"

# Install recreating subdirectories.
#
h{*}:
{
  install         = include/
  install.subdirs = true
}
