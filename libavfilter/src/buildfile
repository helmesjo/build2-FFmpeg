using autoconf

intf_libs = # Interface dependencies.
impl_libs = # Implementation dependencies.

import config = libavutil%lib{config}
import avutil = libavutil%lib{avutil}
impl_libs += $config
import intf_libs += \
  libavutil%lib{avutil} \
  libavcodec%lib{avcodec} \
  libavformat%lib{avformat} \
  libswscale%lib{swscale} \
  libswresample%lib{swresample}

cpu = [string] $c.target.cpu
tgt_win32 = [bool] ($c.target.system == 'win32-msvc')
tgt_macos = [bool] ($c.target.system == 'darwin')

define [see_through] impl_target: group

lib{avfilter}: libul{avfilter}: \
              libavfilter/impl_target{avfilter} \
              libavfilter/h{**} \
              $impl_libs $intf_libs

libul{avfilter}: libavfilter/c{ \
                  filter_list \
                }: include = adhoc

libavfilter/c{filter_list}: libavfilter/c{allfilters}
{{
  diag generate ($>)

  s = $path($<)        # Source file.
  f = $path($>)        # Target file.
  pattern = "AVFilter"
  thing = "filter"
  struct_name = "AVFilter"
  name = "filter_list"

  sed -n -e 's/^extern const AVFilter ff_[avfsinkrc]{2,5}_([[:alnum:]_]{1,});/af_\1/p' $s | \
    set -n LIST
  # assert ($size($codec_LIST) > 0)
  # echo $LIST
  echo "static const $struct_name * const $name[] = {" > $f
  for c: $LIST
    # if enabled $c; then
      echo "    &ff_$c," >> $path($>)
    # fi
  end
  echo "    NULL };" >> $path($>)
}}

all_srcs = [strings] \
  '{"HEADERS":                          "avfilter.c buffersink.c buffersrc.c version.c version_major.h"}' \
  '{"OBJS":                             "allfilters.c audio.c avfilter.c avfiltergraph.c buffersink.c buffersrc.c colorspace.c ccfifo.c drawutils.c formats.c framepool.c framequeue.c graphdump.c graphparser.c version.c video.c"}' \
  '{"SHLIBOBJS":                        "log2_tab.c"}' \
  '{"OBJS":                             "riscv/af_afir_init.c"}' \
  '{"CONFIG_BWDIF_FILTER":              "aarch64/vf_bwdif_init_aarch64.c"}' \
  '{"CONFIG_NLMEANS_FILTER":            "aarch64/vf_nlmeans_init.c"}' \
  '{"CONFIG_BWDIF_FILTER":              "aarch64/vf_bwdif_neon.S"}' \
  '{"CONFIG_NLMEANS_FILTER":            "aarch64/vf_nlmeans_neon.S"}' \
  '{"CONFIG_DNN":                       "dnn/dnn_interface.c"}' \
  '{"CONFIG_DNN":                       "dnn/dnn_io_proc.c"}' \
  '{"CONFIG_DNN":                       "dnn/queue.c"}' \
  '{"CONFIG_DNN":                       "dnn/safe_queue.c"}' \
  '{"CONFIG_DNN":                       "dnn/dnn_backend_common.c"}' \
  '{"CONFIG_LIBTENSORFLOW":             "dnn/dnn_backend_tf.c"}' \
  '{"CONFIG_LIBOPENVINO":               "dnn/dnn_backend_openvino.c"}' \
  '{"CONFIG_LIBTORCH":                  "dnn/dnn_backend_torch.cpp"}' \
  '{"HAVE_LIBC_MSVCRT":                 "file_open.c"}' \
  '{"HAVE_THREADS":                     "pthread.c"}' \
  '{"CONFIG_QSVVPP":                    "qsvvpp.c"}' \
  '{"CONFIG_SCENE_SAD":                 "scene_sad.c"}' \
  '{"CONFIG_DNN":                       "dnn_filter_common.c"}' \
  '{"CONFIG_AAP_FILTER":                "af_aap.c"}' \
  '{"CONFIG_ABENCH_FILTER":             "f_bench.c"}' \
  '{"CONFIG_ACOMPRESSOR_FILTER":        "af_sidechaincompress.c"}' \
  '{"CONFIG_ACONTRAST_FILTER":          "af_acontrast.c"}' \
  '{"CONFIG_ACOPY_FILTER":              "af_acopy.c"}' \
  '{"CONFIG_ACROSSFADE_FILTER":         "af_afade.c"}' \
  '{"CONFIG_ACROSSOVER_FILTER":         "af_acrossover.c"}' \
  '{"CONFIG_ACRUSHER_FILTER":           "af_acrusher.c"}' \
  '{"CONFIG_ACUE_FILTER":               "f_cue.c"}' \
  '{"CONFIG_ADECLICK_FILTER":           "af_adeclick.c"}' \
  '{"CONFIG_ADECLIP_FILTER":            "af_adeclick.c"}' \
  '{"CONFIG_ADECORRELATE_FILTER":       "af_adecorrelate.c"}' \
  '{"CONFIG_ADELAY_FILTER":             "af_adelay.c"}' \
  '{"CONFIG_ADENORM_FILTER":            "af_adenorm.c"}' \
  '{"CONFIG_ADERIVATIVE_FILTER":        "af_aderivative.c"}' \
  '{"CONFIG_ADRC_FILTER":               "af_adrc.c"}' \
  '{"CONFIG_ADYNAMICEQUALIZER_FILTER":  "af_adynamicequalizer.c"}' \
  '{"CONFIG_ADYNAMICSMOOTH_FILTER":     "af_adynamicsmooth.c"}' \
  '{"CONFIG_AECHO_FILTER":              "af_aecho.c"}' \
  '{"CONFIG_AEMPHASIS_FILTER":          "af_aemphasis.c"}' \
  '{"CONFIG_AEVAL_FILTER":              "aeval.c"}' \
  '{"CONFIG_AEXCITER_FILTER":           "af_aexciter.c"}' \
  '{"CONFIG_AFADE_FILTER":              "af_afade.c"}' \
  '{"CONFIG_AFFTDN_FILTER":             "af_afftdn.c"}' \
  '{"CONFIG_AFFTFILT_FILTER":           "af_afftfilt.c"}' \
  '{"CONFIG_AFIR_FILTER":               "af_afir.c"}' \
  '{"CONFIG_AFORMAT_FILTER":            "af_aformat.c"}' \
  '{"CONFIG_AFREQSHIFT_FILTER":         "af_afreqshift.c"}' \
  '{"CONFIG_AFWTDN_FILTER":             "af_afwtdn.c"}' \
  '{"CONFIG_AGATE_FILTER":              "af_agate.c"}' \
  '{"CONFIG_AIIR_FILTER":               "af_aiir.c"}' \
  '{"CONFIG_AINTEGRAL_FILTER":          "af_aderivative.c"}' \
  '{"CONFIG_AINTERLEAVE_FILTER":        "f_interleave.c"}' \
  '{"CONFIG_ALATENCY_FILTER":           "f_latency.c"}' \
  '{"CONFIG_ALIMITER_FILTER":           "af_alimiter.c"}' \
  '{"CONFIG_ALLPASS_FILTER":            "af_biquads.c"}' \
  '{"CONFIG_ALOOP_FILTER":              "f_loop.c"}' \
  '{"CONFIG_AMERGE_FILTER":             "af_amerge.c"}' \
  '{"CONFIG_AMETADATA_FILTER":          "f_metadata.c"}' \
  '{"CONFIG_AMIX_FILTER":               "af_amix.c"}' \
  '{"CONFIG_AMULTIPLY_FILTER":          "af_amultiply.c"}' \
  '{"CONFIG_ANEQUALIZER_FILTER":        "af_anequalizer.c"}' \
  '{"CONFIG_ANLMDN_FILTER":             "af_anlmdn.c"}' \
  '{"CONFIG_ANLMF_FILTER":              "af_anlms.c"}' \
  '{"CONFIG_ANLMS_FILTER":              "af_anlms.c"}' \
  '{"CONFIG_ANULL_FILTER":              "af_anull.c"}' \
  '{"CONFIG_APAD_FILTER":               "af_apad.c"}' \
  '{"CONFIG_APERMS_FILTER":             "f_perms.c"}' \
  '{"CONFIG_APHASER_FILTER":            "af_aphaser.c generate_wave_table.c"}' \
  '{"CONFIG_APHASESHIFT_FILTER":        "af_afreqshift.c"}' \
  '{"CONFIG_APSNR_FILTER":              "af_asdr.c"}' \
  '{"CONFIG_APSYCLIP_FILTER":           "af_apsyclip.c"}' \
  '{"CONFIG_APULSATOR_FILTER":          "af_apulsator.c"}' \
  '{"CONFIG_AREALTIME_FILTER":          "f_realtime.c"}' \
  '{"CONFIG_ARESAMPLE_FILTER":          "af_aresample.c"}' \
  '{"CONFIG_AREVERSE_FILTER":           "f_reverse.c"}' \
  '{"CONFIG_ARLS_FILTER":               "af_arls.c"}' \
  '{"CONFIG_ARNNDN_FILTER":             "af_arnndn.c"}' \
  '{"CONFIG_ASDR_FILTER":               "af_asdr.c"}' \
  '{"CONFIG_ASEGMENT_FILTER":           "f_segment.c"}' \
  '{"CONFIG_ASELECT_FILTER":            "f_select.c"}' \
  '{"CONFIG_ASENDCMD_FILTER":           "f_sendcmd.c"}' \
  '{"CONFIG_ASETNSAMPLES_FILTER":       "af_asetnsamples.c"}' \
  '{"CONFIG_ASETPTS_FILTER":            "setpts.c"}' \
  '{"CONFIG_ASETRATE_FILTER":           "af_asetrate.c"}' \
  '{"CONFIG_ASETTB_FILTER":             "settb.c"}' \
  '{"CONFIG_ASHOWINFO_FILTER":          "af_ashowinfo.c"}' \
  '{"CONFIG_ASIDEDATA_FILTER":          "f_sidedata.c"}' \
  '{"CONFIG_ASISDR_FILTER":             "af_asdr.c"}' \
  '{"CONFIG_ASOFTCLIP_FILTER":          "af_asoftclip.c"}' \
  '{"CONFIG_ASPECTRALSTATS_FILTER":     "af_aspectralstats.c"}' \
  '{"CONFIG_ASPLIT_FILTER":             "split.c"}' \
  '{"CONFIG_ASR_FILTER":                "af_asr.c"}' \
  '{"CONFIG_ASTATS_FILTER":             "af_astats.c"}' \
  '{"CONFIG_ASTREAMSELECT_FILTER":      "f_streamselect.c framesync.c"}' \
  '{"CONFIG_ASUBBOOST_FILTER":          "af_asubboost.c"}' \
  '{"CONFIG_ASUBCUT_FILTER":            "af_asupercut.c"}' \
  '{"CONFIG_ASUPERCUT_FILTER":          "af_asupercut.c"}' \
  '{"CONFIG_ASUPERPASS_FILTER":         "af_asupercut.c"}' \
  '{"CONFIG_ASUPERSTOP_FILTER":         "af_asupercut.c"}' \
  '{"CONFIG_ATEMPO_FILTER":             "af_atempo.c"}' \
  '{"CONFIG_ATILT_FILTER":              "af_atilt.c"}' \
  '{"CONFIG_ATRIM_FILTER":              "trim.c"}' \
  '{"CONFIG_AXCORRELATE_FILTER":        "af_axcorrelate.c"}' \
  '{"CONFIG_AZMQ_FILTER":               "f_zmq.c"}' \
  '{"CONFIG_BANDPASS_FILTER":           "af_biquads.c"}' \
  '{"CONFIG_BANDREJECT_FILTER":         "af_biquads.c"}' \
  '{"CONFIG_BASS_FILTER":               "af_biquads.c"}' \
  '{"CONFIG_BIQUAD_FILTER":             "af_biquads.c"}' \
  '{"CONFIG_BS2B_FILTER":               "af_bs2b.c"}' \
  '{"CONFIG_CHANNELMAP_FILTER":         "af_channelmap.c"}' \
  '{"CONFIG_CHANNELSPLIT_FILTER":       "af_channelsplit.c"}' \
  '{"CONFIG_CHORUS_FILTER":             "af_chorus.c generate_wave_table.c"}' \
  '{"CONFIG_COMPAND_FILTER":            "af_compand.c"}' \
  '{"CONFIG_COMPENSATIONDELAY_FILTER":  "af_compensationdelay.c"}' \
  '{"CONFIG_CROSSFEED_FILTER":          "af_crossfeed.c"}' \
  '{"CONFIG_CRYSTALIZER_FILTER":        "af_crystalizer.c"}' \
  '{"CONFIG_DCSHIFT_FILTER":            "af_dcshift.c"}' \
  '{"CONFIG_DEESSER_FILTER":            "af_deesser.c"}' \
  '{"CONFIG_DIALOGUENHANCE_FILTER":     "af_dialoguenhance.c"}' \
  '{"CONFIG_DRMETER_FILTER":            "af_drmeter.c"}' \
  '{"CONFIG_DYNAUDNORM_FILTER":         "af_dynaudnorm.c"}' \
  '{"CONFIG_EARWAX_FILTER":             "af_earwax.c"}' \
  '{"CONFIG_EBUR128_FILTER":            "f_ebur128.c"}' \
  '{"CONFIG_EQUALIZER_FILTER":          "af_biquads.c"}' \
  '{"CONFIG_EXTRASTEREO_FILTER":        "af_extrastereo.c"}' \
  '{"CONFIG_FIREQUALIZER_FILTER":       "af_firequalizer.c"}' \
  '{"CONFIG_FLANGER_FILTER":            "af_flanger.c generate_wave_table.c"}' \
  '{"CONFIG_HAAS_FILTER":               "af_haas.c"}' \
  '{"CONFIG_HDCD_FILTER":               "af_hdcd.c"}' \
  '{"CONFIG_HEADPHONE_FILTER":          "af_headphone.c"}' \
  '{"CONFIG_HIGHPASS_FILTER":           "af_biquads.c"}' \
  '{"CONFIG_HIGHSHELF_FILTER":          "af_biquads.c"}' \
  '{"CONFIG_JOIN_FILTER":               "af_join.c"}' \
  '{"CONFIG_LADSPA_FILTER":             "af_ladspa.c"}' \
  '{"CONFIG_LOUDNORM_FILTER":           "af_loudnorm.c ebur128.c"}' \
  '{"CONFIG_LOWPASS_FILTER":            "af_biquads.c"}' \
  '{"CONFIG_LOWSHELF_FILTER":           "af_biquads.c"}' \
  '{"CONFIG_LV2_FILTER":                "af_lv2.c"}' \
  '{"CONFIG_MCOMPAND_FILTER":           "af_mcompand.c"}' \
  '{"CONFIG_PAN_FILTER":                "af_pan.c"}' \
  '{"CONFIG_REPLAYGAIN_FILTER":         "af_replaygain.c"}' \
  '{"CONFIG_RUBBERBAND_FILTER":         "af_rubberband.c"}' \
  '{"CONFIG_SIDECHAINCOMPRESS_FILTER":  "af_sidechaincompress.c"}' \
  '{"CONFIG_SIDECHAINGATE_FILTER":      "af_agate.c"}' \
  '{"CONFIG_SILENCEDETECT_FILTER":      "af_silencedetect.c"}' \
  '{"CONFIG_SILENCEREMOVE_FILTER":      "af_silenceremove.c"}' \
  '{"CONFIG_SOFALIZER_FILTER":          "af_sofalizer.c"}' \
  '{"CONFIG_SPEECHNORM_FILTER":         "af_speechnorm.c"}' \
  '{"CONFIG_STEREOTOOLS_FILTER":        "af_stereotools.c"}' \
  '{"CONFIG_STEREOWIDEN_FILTER":        "af_stereowiden.c"}' \
  '{"CONFIG_SUPEREQUALIZER_FILTER":     "af_superequalizer.c"}' \
  '{"CONFIG_SURROUND_FILTER":           "af_surround.c"}' \
  '{"CONFIG_TREBLE_FILTER":             "af_biquads.c"}' \
  '{"CONFIG_TREMOLO_FILTER":            "af_tremolo.c"}' \
  '{"CONFIG_VIBRATO_FILTER":            "af_vibrato.c generate_wave_table.c"}' \
  '{"CONFIG_VIRTUALBASS_FILTER":        "af_virtualbass.c"}' \
  '{"CONFIG_VOLUME_FILTER":             "af_volume.c"}' \
  '{"CONFIG_VOLUMEDETECT_FILTER":       "af_volumedetect.c"}' \
  '{"CONFIG_AEVALSRC_FILTER":           "aeval.c"}' \
  '{"CONFIG_AFDELAYSRC_FILTER":         "asrc_afdelaysrc.c"}' \
  '{"CONFIG_AFIREQSRC_FILTER":          "asrc_afirsrc.c"}' \
  '{"CONFIG_AFIRSRC_FILTER":            "asrc_afirsrc.c"}' \
  '{"CONFIG_ANOISESRC_FILTER":          "asrc_anoisesrc.c"}' \
  '{"CONFIG_ANULLSRC_FILTER":           "asrc_anullsrc.c"}' \
  '{"CONFIG_FLITE_FILTER":              "asrc_flite.c"}' \
  '{"CONFIG_HILBERT_FILTER":            "asrc_hilbert.c"}' \
  '{"CONFIG_SINC_FILTER":               "asrc_sinc.c"}' \
  '{"CONFIG_SINE_FILTER":               "asrc_sine.c"}' \
  '{"CONFIG_ANULLSINK_FILTER":          "asink_anullsink.c"}' \
  '{"CONFIG_ADDROI_FILTER":             "vf_addroi.c"}' \
  '{"CONFIG_ALPHAEXTRACT_FILTER":       "vf_extractplanes.c"}' \
  '{"CONFIG_ALPHAMERGE_FILTER":         "vf_alphamerge.c framesync.c"}' \
  '{"CONFIG_AMPLIFY_FILTER":            "vf_amplify.c"}' \
  '{"CONFIG_ASS_FILTER":                "vf_subtitles.c"}' \
  '{"CONFIG_ATADENOISE_FILTER":         "vf_atadenoise.c"}' \
  '{"CONFIG_AVGBLUR_FILTER":            "vf_avgblur.c"}' \
  '{"CONFIG_AVGBLUR_OPENCL_FILTER":     "vf_avgblur_opencl.c opencl.c opencl/avgblur.cl boxblur.c"}' \
  '{"CONFIG_AVGBLUR_VULKAN_FILTER":     "vf_avgblur_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_BACKGROUNDKEY_FILTER":      "vf_backgroundkey.c"}' \
  '{"CONFIG_BBOX_FILTER":               "bbox.c vf_bbox.c"}' \
  '{"CONFIG_BENCH_FILTER":              "f_bench.c"}' \
  '{"CONFIG_BILATERAL_FILTER":          "vf_bilateral.c"}' \
  '{"CONFIG_BILATERAL_CUDA_FILTER":     "vf_bilateral_cuda.c "}' \
  '{"CONFIG_BITPLANENOISE_FILTER":      "vf_bitplanenoise.c"}' \
  '{"CONFIG_BLACKDETECT_FILTER":        "vf_blackdetect.c"}' \
  '{"CONFIG_BLACKFRAME_FILTER":         "vf_blackframe.c"}' \
  '{"CONFIG_BLEND_FILTER":              "vf_blend.c framesync.c"}' \
  '{"CONFIG_BLEND_VULKAN_FILTER":       "vf_blend_vulkan.c framesync.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_BLOCKDETECT_FILTER":        "vf_blockdetect.c"}' \
  '{"CONFIG_BLURDETECT_FILTER":         "vf_blurdetect.c edge_common.c"}' \
  '{"CONFIG_BM3D_FILTER":               "vf_bm3d.c framesync.c"}' \
  '{"CONFIG_BOXBLUR_FILTER":            "vf_boxblur.c boxblur.c"}' \
  '{"CONFIG_BOXBLUR_OPENCL_FILTER":     "vf_avgblur_opencl.c opencl.c opencl/avgblur.cl boxblur.c"}' \
  '{"CONFIG_BWDIF_FILTER":              "vf_bwdif.c bwdifdsp.c yadif_common.c"}' \
  '{"CONFIG_BWDIF_CUDA_FILTER":         "vf_bwdif_cuda.c  yadif_common.c"}' \
  '{"CONFIG_BWDIF_VULKAN_FILTER":       "vf_bwdif_vulkan.c yadif_common.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_CAS_FILTER":                "vf_cas.c"}' \
  '{"CONFIG_CCREPACK_FILTER":           "vf_ccrepack.c"}' \
  '{"CONFIG_CHROMABER_VULKAN_FILTER":   "vf_chromaber_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_CHROMAHOLD_FILTER":         "vf_chromakey.c"}' \
  '{"CONFIG_CHROMAKEY_FILTER":          "vf_chromakey.c"}' \
  '{"CONFIG_CHROMAKEY_CUDA_FILTER":     "vf_chromakey_cuda.c "}' \
  '{"CONFIG_CHROMANR_FILTER":           "vf_chromanr.c"}' \
  '{"CONFIG_CHROMASHIFT_FILTER":        "vf_chromashift.c"}' \
  '{"CONFIG_CIESCOPE_FILTER":           "vf_ciescope.c"}' \
  '{"CONFIG_CODECVIEW_FILTER":          "vf_codecview.c qp_table.c"}' \
  '{"CONFIG_COLORBALANCE_FILTER":       "vf_colorbalance.c"}' \
  '{"CONFIG_COLORCHANNELMIXER_FILTER":  "vf_colorchannelmixer.c"}' \
  '{"CONFIG_COLORCONTRAST_FILTER":      "vf_colorcontrast.c"}' \
  '{"CONFIG_COLORCORRECT_FILTER":       "vf_colorcorrect.c"}' \
  '{"CONFIG_COLORIZE_FILTER":           "vf_colorize.c"}' \
  '{"CONFIG_COLORKEY_FILTER":           "vf_colorkey.c"}' \
  '{"CONFIG_COLORKEY_OPENCL_FILTER":    "vf_colorkey_opencl.c opencl.c opencl/colorkey.cl"}' \
  '{"CONFIG_COLORHOLD_FILTER":          "vf_colorkey.c"}' \
  '{"CONFIG_COLORLEVELS_FILTER":        "vf_colorlevels.c"}' \
  '{"CONFIG_COLORMAP_FILTER":           "vf_colormap.c"}' \
  '{"CONFIG_COLORMATRIX_FILTER":        "vf_colormatrix.c"}' \
  '{"CONFIG_COLORSPACE_FILTER":         "vf_colorspace.c colorspacedsp.c"}' \
  '{"CONFIG_COLORSPACE_CUDA_FILTER":    "vf_colorspace_cuda.c  cuda/load_helper.c"}' \
  '{"CONFIG_COLORTEMPERATURE_FILTER":   "vf_colortemperature.c"}' \
  '{"CONFIG_CONVOLUTION_FILTER":        "vf_convolution.c"}' \
  '{"CONFIG_CONVOLUTION_OPENCL_FILTER": "vf_convolution_opencl.c opencl.c opencl/convolution.cl"}' \
  '{"CONFIG_CONVOLVE_FILTER":           "vf_convolve.c framesync.c"}' \
  '{"CONFIG_COPY_FILTER":               "vf_copy.c"}' \
  '{"CONFIG_COREIMAGE_FILTER":          "vf_coreimage.m"}' \
  '{"CONFIG_CORR_FILTER":               "vf_corr.c framesync.c"}' \
  '{"CONFIG_COVER_RECT_FILTER":         "vf_cover_rect.c lavfutils.c"}' \
  '{"CONFIG_CROP_FILTER":               "vf_crop.c"}' \
  '{"CONFIG_CROPDETECT_FILTER":         "vf_cropdetect.c edge_common.c"}' \
  '{"CONFIG_CUE_FILTER":                "f_cue.c"}' \
  '{"CONFIG_CURVES_FILTER":             "vf_curves.c"}' \
  '{"CONFIG_DATASCOPE_FILTER":          "vf_datascope.c"}' \
  '{"CONFIG_DBLUR_FILTER":              "vf_dblur.c"}' \
  '{"CONFIG_DCTDNOIZ_FILTER":           "vf_dctdnoiz.c"}' \
  '{"CONFIG_DEBAND_FILTER":             "vf_deband.c"}' \
  '{"CONFIG_DEBLOCK_FILTER":            "vf_deblock.c"}' \
  '{"CONFIG_DECIMATE_FILTER":           "vf_decimate.c"}' \
  '{"CONFIG_DERAIN_FILTER":             "vf_derain.c"}' \
  '{"CONFIG_DECONVOLVE_FILTER":         "vf_convolve.c framesync.c"}' \
  '{"CONFIG_DEDOT_FILTER":              "vf_dedot.c"}' \
  '{"CONFIG_DEFLATE_FILTER":            "vf_neighbor.c"}' \
  '{"CONFIG_DEFLICKER_FILTER":          "vf_deflicker.c"}' \
  '{"CONFIG_DEINTERLACE_QSV_FILTER":    "vf_vpp_qsv.c"}' \
  '{"CONFIG_DEINTERLACE_VAAPI_FILTER":  "vf_deinterlace_vaapi.c vaapi_vpp.c"}' \
  '{"CONFIG_DEJUDDER_FILTER":           "vf_dejudder.c"}' \
  '{"CONFIG_DELOGO_FILTER":             "vf_delogo.c"}' \
  '{"CONFIG_DENOISE_VAAPI_FILTER":      "vf_misc_vaapi.c vaapi_vpp.c"}' \
  '{"CONFIG_DESHAKE_OPENCL_FILTER":     "vf_deshake_opencl.c opencl.c opencl/deshake.cl transform.c"}' \
  '{"CONFIG_DESHAKE_FILTER":            "vf_deshake.c transform.c"}' \
  '{"CONFIG_DESPILL_FILTER":            "vf_despill.c"}' \
  '{"CONFIG_DETELECINE_FILTER":         "vf_detelecine.c"}' \
  '{"CONFIG_DILATION_FILTER":           "vf_neighbor.c"}' \
  '{"CONFIG_DILATION_OPENCL_FILTER":    "vf_neighbor_opencl.c opencl.c opencl/neighbor.cl"}' \
  '{"CONFIG_DISPLACE_FILTER":           "vf_displace.c framesync.c"}' \
  '{"CONFIG_DNN_CLASSIFY_FILTER":       "vf_dnn_classify.c"}' \
  '{"CONFIG_DNN_DETECT_FILTER":         "vf_dnn_detect.c"}' \
  '{"CONFIG_DNN_PROCESSING_FILTER":     "vf_dnn_processing.c"}' \
  '{"CONFIG_DOUBLEWEAVE_FILTER":        "vf_weave.c"}' \
  '{"CONFIG_DRAWBOX_FILTER":            "vf_drawbox.c"}' \
  '{"CONFIG_DRAWGRAPH_FILTER":          "f_drawgraph.c"}' \
  '{"CONFIG_DRAWGRID_FILTER":           "vf_drawbox.c"}' \
  '{"CONFIG_DRAWTEXT_FILTER":           "vf_drawtext.c textutils.c"}' \
  '{"CONFIG_EDGEDETECT_FILTER":         "vf_edgedetect.c edge_common.c"}' \
  '{"CONFIG_ELBG_FILTER":               "vf_elbg.c"}' \
  '{"CONFIG_ENTROPY_FILTER":            "vf_entropy.c"}' \
  '{"CONFIG_EPX_FILTER":                "vf_epx.c"}' \
  '{"CONFIG_EQ_FILTER":                 "vf_eq.c"}' \
  '{"CONFIG_EROSION_FILTER":            "vf_neighbor.c"}' \
  '{"CONFIG_EROSION_OPENCL_FILTER":     "vf_neighbor_opencl.c opencl.c opencl/neighbor.cl"}' \
  '{"CONFIG_ESTDIF_FILTER":             "vf_estdif.c"}' \
  '{"CONFIG_EXPOSURE_FILTER":           "vf_exposure.c"}' \
  '{"CONFIG_EXTRACTPLANES_FILTER":      "vf_extractplanes.c"}' \
  '{"CONFIG_FADE_FILTER":               "vf_fade.c"}' \
  '{"CONFIG_FEEDBACK_FILTER":           "vf_feedback.c"}' \
  '{"CONFIG_FFTDNOIZ_FILTER":           "vf_fftdnoiz.c"}' \
  '{"CONFIG_FFTFILT_FILTER":            "vf_fftfilt.c"}' \
  '{"CONFIG_FIELD_FILTER":              "vf_field.c"}' \
  '{"CONFIG_FIELDHINT_FILTER":          "vf_fieldhint.c"}' \
  '{"CONFIG_FIELDMATCH_FILTER":         "vf_fieldmatch.c"}' \
  '{"CONFIG_FIELDORDER_FILTER":         "vf_fieldorder.c"}' \
  '{"CONFIG_FILLBORDERS_FILTER":        "vf_fillborders.c"}' \
  '{"CONFIG_FIND_RECT_FILTER":          "vf_find_rect.c lavfutils.c"}' \
  '{"CONFIG_FLOODFILL_FILTER":          "vf_floodfill.c"}' \
  '{"CONFIG_FORMAT_FILTER":             "vf_format.c"}' \
  '{"CONFIG_FPS_FILTER":                "vf_fps.c"}' \
  '{"CONFIG_FRAMEPACK_FILTER":          "vf_framepack.c"}' \
  '{"CONFIG_FRAMERATE_FILTER":          "vf_framerate.c"}' \
  '{"CONFIG_FRAMESTEP_FILTER":          "vf_framestep.c"}' \
  '{"CONFIG_FREEZEDETECT_FILTER":       "vf_freezedetect.c"}' \
  '{"CONFIG_FREEZEFRAMES_FILTER":       "vf_freezeframes.c"}' \
  '{"CONFIG_FREI0R_FILTER":             "vf_frei0r.c"}' \
  '{"CONFIG_FSPP_FILTER":               "vf_fspp.c qp_table.c"}' \
  '{"CONFIG_FSYNC_FILTER":              "vf_fsync.c"}' \
  '{"CONFIG_GBLUR_FILTER":              "vf_gblur.c"}' \
  '{"CONFIG_GBLUR_VULKAN_FILTER":       "vf_gblur_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_GEQ_FILTER":                "vf_geq.c"}' \
  '{"CONFIG_GRADFUN_FILTER":            "vf_gradfun.c"}' \
  '{"CONFIG_GRAPHMONITOR_FILTER":       "f_graphmonitor.c"}' \
  '{"CONFIG_GRAYWORLD_FILTER":          "vf_grayworld.c"}' \
  '{"CONFIG_GREYEDGE_FILTER":           "vf_colorconstancy.c"}' \
  '{"CONFIG_GUIDED_FILTER":             "vf_guided.c"}' \
  '{"CONFIG_HALDCLUT_FILTER":           "vf_lut3d.c framesync.c"}' \
  '{"CONFIG_HFLIP_FILTER":              "vf_hflip.c"}' \
  '{"CONFIG_HFLIP_VULKAN_FILTER":       "vf_flip_vulkan.c vulkan.c"}' \
  '{"CONFIG_HISTEQ_FILTER":             "vf_histeq.c"}' \
  '{"CONFIG_HISTOGRAM_FILTER":          "vf_histogram.c"}' \
  '{"CONFIG_HQDN3D_FILTER":             "vf_hqdn3d.c"}' \
  '{"CONFIG_HQX_FILTER":                "vf_hqx.c"}' \
  '{"CONFIG_HSTACK_FILTER":             "vf_stack.c framesync.c"}' \
  '{"CONFIG_HSVHOLD_FILTER":            "vf_hsvkey.c"}' \
  '{"CONFIG_HSVKEY_FILTER":             "vf_hsvkey.c"}' \
  '{"CONFIG_HUE_FILTER":                "vf_hue.c"}' \
  '{"CONFIG_HUESATURATION_FILTER":      "vf_huesaturation.c"}' \
  '{"CONFIG_HWDOWNLOAD_FILTER":         "vf_hwdownload.c"}' \
  '{"CONFIG_HWMAP_FILTER":              "vf_hwmap.c"}' \
  '{"CONFIG_HWUPLOAD_CUDA_FILTER":      "vf_hwupload_cuda.c"}' \
  '{"CONFIG_HWUPLOAD_FILTER":           "vf_hwupload.c"}' \
  '{"CONFIG_HYSTERESIS_FILTER":         "vf_hysteresis.c framesync.c"}' \
  '{"CONFIG_ICCDETECT_FILTER":          "vf_iccdetect.c fflcms2.c"}' \
  '{"CONFIG_ICCGEN_FILTER":             "vf_iccgen.c fflcms2.c"}' \
  '{"CONFIG_IDENTITY_FILTER":           "vf_identity.c"}' \
  '{"CONFIG_IDET_FILTER":               "vf_idet.c"}' \
  '{"CONFIG_IL_FILTER":                 "vf_il.c"}' \
  '{"CONFIG_INFLATE_FILTER":            "vf_neighbor.c"}' \
  '{"CONFIG_INTERLACE_FILTER":          "vf_tinterlace.c"}' \
  '{"CONFIG_INTERLEAVE_FILTER":         "f_interleave.c"}' \
  '{"CONFIG_KERNDEINT_FILTER":          "vf_kerndeint.c"}' \
  '{"CONFIG_KIRSCH_FILTER":             "vf_convolution.c"}' \
  '{"CONFIG_LAGFUN_FILTER":             "vf_lagfun.c"}' \
  '{"CONFIG_LATENCY_FILTER":            "f_latency.c"}' \
  '{"CONFIG_LENSCORRECTION_FILTER":     "vf_lenscorrection.c"}' \
  '{"CONFIG_LENSFUN_FILTER":            "vf_lensfun.c"}' \
  '{"CONFIG_LIBPLACEBO_FILTER":         "vf_libplacebo.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_LIBVMAF_FILTER":            "vf_libvmaf.c framesync.c"}' \
  '{"CONFIG_LIBVMAF_CUDA_FILTER":       "vf_libvmaf.c framesync.c"}' \
  '{"CONFIG_LIMITDIFF_FILTER":          "vf_limitdiff.c framesync.c"}' \
  '{"CONFIG_LIMITER_FILTER":            "vf_limiter.c"}' \
  '{"CONFIG_LOOP_FILTER":               "f_loop.c"}' \
  '{"CONFIG_LUMAKEY_FILTER":            "vf_lumakey.c"}' \
  '{"CONFIG_LUT1D_FILTER":              "vf_lut3d.c"}' \
  '{"CONFIG_LUT_FILTER":                "vf_lut.c"}' \
  '{"CONFIG_LUT2_FILTER":               "vf_lut2.c framesync.c"}' \
  '{"CONFIG_LUT3D_FILTER":              "vf_lut3d.c framesync.c"}' \
  '{"CONFIG_LUTRGB_FILTER":             "vf_lut.c"}' \
  '{"CONFIG_LUTYUV_FILTER":             "vf_lut.c"}' \
  '{"CONFIG_MASKEDCLAMP_FILTER":        "vf_maskedclamp.c framesync.c"}' \
  '{"CONFIG_MASKEDMAX_FILTER":          "vf_maskedminmax.c framesync.c"}' \
  '{"CONFIG_MASKEDMERGE_FILTER":        "vf_maskedmerge.c framesync.c"}' \
  '{"CONFIG_MASKEDMIN_FILTER":          "vf_maskedminmax.c framesync.c"}' \
  '{"CONFIG_MASKEDTHRESHOLD_FILTER":    "vf_maskedthreshold.c framesync.c"}' \
  '{"CONFIG_MASKFUN_FILTER":            "vf_maskfun.c"}' \
  '{"CONFIG_MCDEINT_FILTER":            "vf_mcdeint.c"}' \
  '{"CONFIG_MEDIAN_FILTER":             "vf_median.c"}' \
  '{"CONFIG_MERGEPLANES_FILTER":        "vf_mergeplanes.c framesync.c"}' \
  '{"CONFIG_MESTIMATE_FILTER":          "vf_mestimate.c motion_estimation.c"}' \
  '{"CONFIG_METADATA_FILTER":           "f_metadata.c"}' \
  '{"CONFIG_MIDEQUALIZER_FILTER":       "vf_midequalizer.c framesync.c"}' \
  '{"CONFIG_MINTERPOLATE_FILTER":       "vf_minterpolate.c motion_estimation.c"}' \
  '{"CONFIG_MIX_FILTER":                "vf_mix.c framesync.c"}' \
  '{"CONFIG_MONOCHROME_FILTER":         "vf_monochrome.c"}' \
  '{"CONFIG_MORPHO_FILTER":             "vf_morpho.c"}' \
  '{"CONFIG_MPDECIMATE_FILTER":         "vf_mpdecimate.c"}' \
  '{"CONFIG_MULTIPLY_FILTER":           "vf_multiply.c"}' \
  '{"CONFIG_NEGATE_FILTER":             "vf_negate.c"}' \
  '{"CONFIG_NLMEANS_FILTER":            "vf_nlmeans.c"}' \
  '{"CONFIG_NLMEANS_OPENCL_FILTER":     "vf_nlmeans_opencl.c opencl.c opencl/nlmeans.cl"}' \
  '{"CONFIG_NLMEANS_VULKAN_FILTER":     "vf_nlmeans_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_NNEDI_FILTER":              "vf_nnedi.c"}' \
  '{"CONFIG_NOFORMAT_FILTER":           "vf_format.c"}' \
  '{"CONFIG_NOISE_FILTER":              "vf_noise.c"}' \
  '{"CONFIG_NORMALIZE_FILTER":          "vf_normalize.c"}' \
  '{"CONFIG_NULL_FILTER":               "vf_null.c"}' \
  '{"CONFIG_OCR_FILTER":                "vf_ocr.c"}' \
  '{"CONFIG_OCV_FILTER":                "vf_libopencv.c"}' \
  '{"CONFIG_OSCILLOSCOPE_FILTER":       "vf_datascope.c"}' \
  '{"CONFIG_OVERLAY_FILTER":            "vf_overlay.c framesync.c"}' \
  '{"CONFIG_OVERLAY_CUDA_FILTER":       "vf_overlay_cuda.c framesync.c  cuda/load_helper.c"}' \
  '{"CONFIG_OVERLAY_OPENCL_FILTER":     "vf_overlay_opencl.c opencl.c opencl/overlay.cl framesync.c"}' \
  '{"CONFIG_OVERLAY_QSV_FILTER":        "vf_overlay_qsv.c framesync.c"}' \
  '{"CONFIG_OVERLAY_VAAPI_FILTER":      "vf_overlay_vaapi.c framesync.c vaapi_vpp.c"}' \
  '{"CONFIG_OVERLAY_VULKAN_FILTER":     "vf_overlay_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_OWDENOISE_FILTER":          "vf_owdenoise.c"}' \
  '{"CONFIG_PAD_FILTER":                "vf_pad.c"}' \
  '{"CONFIG_PAD_OPENCL_FILTER":         "vf_pad_opencl.c opencl.c opencl/pad.cl"}' \
  '{"CONFIG_PALETTEGEN_FILTER":         "vf_palettegen.c palette.c"}' \
  '{"CONFIG_PALETTEUSE_FILTER":         "vf_paletteuse.c framesync.c palette.c"}' \
  '{"CONFIG_PERMS_FILTER":              "f_perms.c"}' \
  '{"CONFIG_PERSPECTIVE_FILTER":        "vf_perspective.c"}' \
  '{"CONFIG_PHASE_FILTER":              "vf_phase.c"}' \
  '{"CONFIG_PHOTOSENSITIVITY_FILTER":   "vf_photosensitivity.c"}' \
  '{"CONFIG_PIXDESCTEST_FILTER":        "vf_pixdesctest.c"}' \
  '{"CONFIG_PIXELIZE_FILTER":           "vf_pixelize.c"}' \
  '{"CONFIG_PIXSCOPE_FILTER":           "vf_datascope.c"}' \
  '{"CONFIG_PP_FILTER":                 "vf_pp.c qp_table.c"}' \
  '{"CONFIG_PP7_FILTER":                "vf_pp7.c qp_table.c"}' \
  '{"CONFIG_PREMULTIPLY_FILTER":        "vf_premultiply.c framesync.c"}' \
  '{"CONFIG_PREWITT_FILTER":            "vf_convolution.c"}' \
  '{"CONFIG_PREWITT_OPENCL_FILTER":     "vf_convolution_opencl.c opencl.c opencl/convolution.cl"}' \
  '{"CONFIG_PROCAMP_VAAPI_FILTER":      "vf_procamp_vaapi.c vaapi_vpp.c"}' \
  '{"CONFIG_PROGRAM_OPENCL_FILTER":     "vf_program_opencl.c opencl.c framesync.c"}' \
  '{"CONFIG_PSEUDOCOLOR_FILTER":        "vf_pseudocolor.c"}' \
  '{"CONFIG_PSNR_FILTER":               "vf_psnr.c framesync.c"}' \
  '{"CONFIG_PULLUP_FILTER":             "vf_pullup.c"}' \
  '{"CONFIG_QP_FILTER":                 "vf_qp.c"}' \
  '{"CONFIG_QUIRC_FILTER":              "vf_quirc.c"}' \
  '{"CONFIG_RANDOM_FILTER":             "vf_random.c"}' \
  '{"CONFIG_READEIA608_FILTER":         "vf_readeia608.c"}' \
  '{"CONFIG_READVITC_FILTER":           "vf_readvitc.c"}' \
  '{"CONFIG_REALTIME_FILTER":           "f_realtime.c"}' \
  '{"CONFIG_REMAP_FILTER":              "vf_remap.c framesync.c"}' \
  '{"CONFIG_REMAP_OPENCL_FILTER":       "vf_remap_opencl.c framesync.c opencl.c opencl/remap.cl"}' \
  '{"CONFIG_REMOVEGRAIN_FILTER":        "vf_removegrain.c"}' \
  '{"CONFIG_REMOVELOGO_FILTER":         "bbox.c lswsutils.c lavfutils.c vf_removelogo.c"}' \
  '{"CONFIG_REPEATFIELDS_FILTER":       "vf_repeatfields.c"}' \
  '{"CONFIG_REVERSE_FILTER":            "f_reverse.c"}' \
  '{"CONFIG_RGBASHIFT_FILTER":          "vf_chromashift.c"}' \
  '{"CONFIG_ROBERTS_FILTER":            "vf_convolution.c"}' \
  '{"CONFIG_ROBERTS_OPENCL_FILTER":     "vf_convolution_opencl.c opencl.c opencl/convolution.cl"}' \
  '{"CONFIG_ROTATE_FILTER":             "vf_rotate.c"}' \
  '{"CONFIG_SAB_FILTER":                "vf_sab.c"}' \
  '{"CONFIG_SCALE_FILTER":              "vf_scale.c scale_eval.c"}' \
  '{"CONFIG_SCALE_CUDA_FILTER":         "vf_scale_cuda.c scale_eval.c  cuda/load_helper.c"}' \
  '{"CONFIG_SCALE_NPP_FILTER":          "vf_scale_npp.c scale_eval.c"}' \
  '{"CONFIG_SCALE_QSV_FILTER":          "vf_vpp_qsv.c"}' \
  '{"CONFIG_SCALE_VAAPI_FILTER":        "vf_scale_vaapi.c scale_eval.c vaapi_vpp.c"}' \
  '{"CONFIG_SCALE_VT_FILTER":           "vf_scale_vt.c scale_eval.c"}' \
  '{"CONFIG_SCALE_VULKAN_FILTER":       "vf_scale_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_SCALE2REF_FILTER":          "vf_scale.c scale_eval.c"}' \
  '{"CONFIG_SCALE2REF_NPP_FILTER":      "vf_scale_npp.c scale_eval.c"}' \
  '{"CONFIG_SCDET_FILTER":              "vf_scdet.c"}' \
  '{"CONFIG_SCHARR_FILTER":             "vf_convolution.c"}' \
  '{"CONFIG_SCROLL_FILTER":             "vf_scroll.c"}' \
  '{"CONFIG_SEGMENT_FILTER":            "f_segment.c"}' \
  '{"CONFIG_SELECT_FILTER":             "f_select.c"}' \
  '{"CONFIG_SELECTIVECOLOR_FILTER":     "vf_selectivecolor.c"}' \
  '{"CONFIG_SENDCMD_FILTER":            "f_sendcmd.c"}' \
  '{"CONFIG_SEPARATEFIELDS_FILTER":     "vf_separatefields.c"}' \
  '{"CONFIG_SETDAR_FILTER":             "vf_aspect.c"}' \
  '{"CONFIG_SETFIELD_FILTER":           "vf_setparams.c"}' \
  '{"CONFIG_SETPARAMS_FILTER":          "vf_setparams.c"}' \
  '{"CONFIG_SETPTS_FILTER":             "setpts.c"}' \
  '{"CONFIG_SETRANGE_FILTER":           "vf_setparams.c"}' \
  '{"CONFIG_SETSAR_FILTER":             "vf_aspect.c"}' \
  '{"CONFIG_SETTB_FILTER":              "settb.c"}' \
  '{"CONFIG_SHARPEN_NPP_FILTER":        "vf_sharpen_npp.c"}' \
  '{"CONFIG_SHARPNESS_VAAPI_FILTER":    "vf_misc_vaapi.c vaapi_vpp.c"}' \
  '{"CONFIG_SHEAR_FILTER":              "vf_shear.c"}' \
  '{"CONFIG_SHOWINFO_FILTER":           "vf_showinfo.c"}' \
  '{"CONFIG_SHOWPALETTE_FILTER":        "vf_showpalette.c"}' \
  '{"CONFIG_SHUFFLEFRAMES_FILTER":      "vf_shuffleframes.c"}' \
  '{"CONFIG_SHUFFLEPIXELS_FILTER":      "vf_shufflepixels.c"}' \
  '{"CONFIG_SHUFFLEPLANES_FILTER":      "vf_shuffleplanes.c"}' \
  '{"CONFIG_SIDEDATA_FILTER":           "f_sidedata.c"}' \
  '{"CONFIG_SIGNALSTATS_FILTER":        "vf_signalstats.c"}' \
  '{"CONFIG_SIGNATURE_FILTER":          "vf_signature.c"}' \
  '{"CONFIG_SMARTBLUR_FILTER":          "vf_smartblur.c"}' \
  '{"CONFIG_SOBEL_FILTER":              "vf_convolution.c"}' \
  '{"CONFIG_SOBEL_OPENCL_FILTER":       "vf_convolution_opencl.c opencl.c opencl/convolution.cl"}' \
  '{"CONFIG_SITI_FILTER":               "vf_siti.c"}' \
  '{"CONFIG_SPLIT_FILTER":              "split.c"}' \
  '{"CONFIG_SPP_FILTER":                "vf_spp.c qp_table.c"}' \
  '{"CONFIG_SR_FILTER":                 "vf_sr.c"}' \
  '{"CONFIG_SSIM_FILTER":               "vf_ssim.c framesync.c"}' \
  '{"CONFIG_SSIM360_FILTER":            "vf_ssim360.c framesync.c"}' \
  '{"CONFIG_STEREO3D_FILTER":           "vf_stereo3d.c"}' \
  '{"CONFIG_STREAMSELECT_FILTER":       "f_streamselect.c framesync.c"}' \
  '{"CONFIG_SUBTITLES_FILTER":          "vf_subtitles.c"}' \
  '{"CONFIG_SUPER2XSAI_FILTER":         "vf_super2xsai.c"}' \
  '{"CONFIG_SWAPRECT_FILTER":           "vf_swaprect.c"}' \
  '{"CONFIG_SWAPUV_FILTER":             "vf_swapuv.c"}' \
  '{"CONFIG_TBLEND_FILTER":             "vf_blend.c framesync.c"}' \
  '{"CONFIG_TELECINE_FILTER":           "vf_telecine.c"}' \
  '{"CONFIG_THISTOGRAM_FILTER":         "vf_histogram.c"}' \
  '{"CONFIG_THRESHOLD_FILTER":          "vf_threshold.c framesync.c"}' \
  '{"CONFIG_THUMBNAIL_FILTER":          "vf_thumbnail.c"}' \
  '{"CONFIG_THUMBNAIL_CUDA_FILTER":     "vf_thumbnail_cuda.c  cuda/load_helper.c"}' \
  '{"CONFIG_TILE_FILTER":               "vf_tile.c"}' \
  '{"CONFIG_TILTANDSHIFT_FILTER":       "vf_tiltandshift.c"}' \
  '{"CONFIG_TINTERLACE_FILTER":         "vf_tinterlace.c"}' \
  '{"CONFIG_TLUT2_FILTER":              "vf_lut2.c framesync.c"}' \
  '{"CONFIG_TMEDIAN_FILTER":            "vf_xmedian.c framesync.c"}' \
  '{"CONFIG_TMIDEQUALIZER_FILTER":      "vf_tmidequalizer.c"}' \
  '{"CONFIG_TMIX_FILTER":               "vf_mix.c framesync.c"}' \
  '{"CONFIG_TONEMAP_FILTER":            "vf_tonemap.c"}' \
  '{"CONFIG_TONEMAP_OPENCL_FILTER":     "vf_tonemap_opencl.c opencl.c opencl/tonemap.cl opencl/colorspace_common.cl"}' \
  '{"CONFIG_TONEMAP_VAAPI_FILTER":      "vf_tonemap_vaapi.c vaapi_vpp.c"}' \
  '{"CONFIG_TPAD_FILTER":               "vf_tpad.c"}' \
  '{"CONFIG_TRANSPOSE_FILTER":          "vf_transpose.c"}' \
  '{"CONFIG_TRANSPOSE_NPP_FILTER":      "vf_transpose_npp.c"}' \
  '{"CONFIG_TRANSPOSE_OPENCL_FILTER":   "vf_transpose_opencl.c opencl.c opencl/transpose.cl"}' \
  '{"CONFIG_TRANSPOSE_VAAPI_FILTER":    "vf_transpose_vaapi.c vaapi_vpp.c"}' \
  '{"CONFIG_TRANSPOSE_VT_FILTER":       "vf_transpose_vt.c"}' \
  '{"CONFIG_TRANSPOSE_VULKAN_FILTER":   "vf_transpose_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_TRIM_FILTER":               "trim.c"}' \
  '{"CONFIG_UNPREMULTIPLY_FILTER":      "vf_premultiply.c framesync.c"}' \
  '{"CONFIG_UNSHARP_FILTER":            "vf_unsharp.c"}' \
  '{"CONFIG_UNSHARP_OPENCL_FILTER":     "vf_unsharp_opencl.c opencl.c opencl/unsharp.cl"}' \
  '{"CONFIG_UNTILE_FILTER":             "vf_untile.c"}' \
  '{"CONFIG_USPP_FILTER":               "vf_uspp.c qp_table.c"}' \
  '{"CONFIG_V360_FILTER":               "vf_v360.c"}' \
  '{"CONFIG_VAGUEDENOISER_FILTER":      "vf_vaguedenoiser.c"}' \
  '{"CONFIG_VARBLUR_FILTER":            "vf_varblur.c framesync.c"}' \
  '{"CONFIG_VECTORSCOPE_FILTER":        "vf_vectorscope.c"}' \
  '{"CONFIG_VFLIP_FILTER":              "vf_vflip.c"}' \
  '{"CONFIG_VFLIP_VULKAN_FILTER":       "vf_flip_vulkan.c vulkan.c"}' \
  '{"CONFIG_VFRDET_FILTER":             "vf_vfrdet.c"}' \
  '{"CONFIG_VIBRANCE_FILTER":           "vf_vibrance.c"}' \
  '{"CONFIG_VIDSTABDETECT_FILTER":      "vidstabutils.c vf_vidstabdetect.c"}' \
  '{"CONFIG_VIDSTABTRANSFORM_FILTER":   "vidstabutils.c vf_vidstabtransform.c"}' \
  '{"CONFIG_VIF_FILTER":                "vf_vif.c framesync.c"}' \
  '{"CONFIG_VIGNETTE_FILTER":           "vf_vignette.c"}' \
  '{"CONFIG_VMAFMOTION_FILTER":         "vf_vmafmotion.c framesync.c"}' \
  '{"CONFIG_VPP_QSV_FILTER":            "vf_vpp_qsv.c"}' \
  '{"CONFIG_VSTACK_FILTER":             "vf_stack.c framesync.c"}' \
  '{"CONFIG_W3FDIF_FILTER":             "vf_w3fdif.c"}' \
  '{"CONFIG_WAVEFORM_FILTER":           "vf_waveform.c"}' \
  '{"CONFIG_WEAVE_FILTER":              "vf_weave.c"}' \
  '{"CONFIG_XBR_FILTER":                "vf_xbr.c"}' \
  '{"CONFIG_XCORRELATE_FILTER":         "vf_convolve.c framesync.c"}' \
  '{"CONFIG_XFADE_FILTER":              "vf_xfade.c"}' \
  '{"CONFIG_XFADE_OPENCL_FILTER":       "vf_xfade_opencl.c opencl.c opencl/xfade.cl"}' \
  '{"CONFIG_XFADE_VULKAN_FILTER":       "vf_xfade_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_XMEDIAN_FILTER":            "vf_xmedian.c framesync.c"}' \
  '{"CONFIG_XSTACK_FILTER":             "vf_stack.c framesync.c"}' \
  '{"CONFIG_YADIF_FILTER":              "vf_yadif.c yadif_common.c"}' \
  '{"CONFIG_YADIF_CUDA_FILTER":         "vf_yadif_cuda.c  yadif_common.c cuda/load_helper.c"}' \
  '{"CONFIG_YADIF_VIDEOTOOLBOX_FILTER": "vf_yadif_videotoolbox.m  metal/utils.m yadif_common.c"}' \
  '{"CONFIG_YAEPBLUR_FILTER":           "vf_yaepblur.c"}' \
  '{"CONFIG_ZMQ_FILTER":                "f_zmq.c"}' \
  '{"CONFIG_ZOOMPAN_FILTER":            "vf_zoompan.c"}' \
  '{"CONFIG_ZSCALE_FILTER":             "vf_zscale.c"}' \
  '{"CONFIG_HSTACK_VAAPI_FILTER":       "vf_stack_vaapi.c framesync.c vaapi_vpp.c"}' \
  '{"CONFIG_VSTACK_VAAPI_FILTER":       "vf_stack_vaapi.c framesync.c vaapi_vpp.c"}' \
  '{"CONFIG_XSTACK_VAAPI_FILTER":       "vf_stack_vaapi.c framesync.c vaapi_vpp.c"}' \
  '{"CONFIG_HSTACK_QSV_FILTER":         "vf_stack_qsv.c framesync.c"}' \
  '{"CONFIG_VSTACK_QSV_FILTER":         "vf_stack_qsv.c framesync.c"}' \
  '{"CONFIG_XSTACK_QSV_FILTER":         "vf_stack_qsv.c framesync.c"}' \
  '{"CONFIG_ALLRGB_FILTER":             "vsrc_testsrc.c"}' \
  '{"CONFIG_ALLYUV_FILTER":             "vsrc_testsrc.c"}' \
  '{"CONFIG_CELLAUTO_FILTER":           "vsrc_cellauto.c"}' \
  '{"CONFIG_COLOR_FILTER":              "vsrc_testsrc.c"}' \
  '{"CONFIG_COLORCHART_FILTER":         "vsrc_testsrc.c"}' \
  '{"CONFIG_COLORSPECTRUM_FILTER":      "vsrc_testsrc.c"}' \
  '{"CONFIG_COREIMAGESRC_FILTER":       "vf_coreimage.m"}' \
  '{"CONFIG_DDAGRAB_FILTER":            "vsrc_ddagrab.c"}' \
  '{"CONFIG_FREI0R_SRC_FILTER":         "vf_frei0r.c"}' \
  '{"CONFIG_GRADIENTS_FILTER":          "vsrc_gradients.c"}' \
  '{"CONFIG_HALDCLUTSRC_FILTER":        "vsrc_testsrc.c"}' \
  '{"CONFIG_LIFE_FILTER":               "vsrc_life.c"}' \
  '{"CONFIG_MANDELBROT_FILTER":         "vsrc_mandelbrot.c"}' \
  '{"CONFIG_MPTESTSRC_FILTER":          "vsrc_mptestsrc.c"}' \
  '{"CONFIG_NULLSRC_FILTER":            "vsrc_testsrc.c"}' \
  '{"CONFIG_OPENCLSRC_FILTER":          "vf_program_opencl.c opencl.c"}' \
  '{"CONFIG_PAL75BARS_FILTER":          "vsrc_testsrc.c"}' \
  '{"CONFIG_PAL100BARS_FILTER":         "vsrc_testsrc.c"}' \
  '{"CONFIG_QRENCODE_FILTER":           "qrencode.c textutils.c"}' \
  '{"CONFIG_QRENCODESRC_FILTER":        "qrencode.c textutils.c"}' \
  '{"CONFIG_RGBTESTSRC_FILTER":         "vsrc_testsrc.c"}' \
  '{"CONFIG_SIERPINSKI_FILTER":         "vsrc_sierpinski.c"}' \
  '{"CONFIG_SMPTEBARS_FILTER":          "vsrc_testsrc.c"}' \
  '{"CONFIG_SMPTEHDBARS_FILTER":        "vsrc_testsrc.c"}' \
  '{"CONFIG_COLOR_VULKAN_FILTER":       "vsrc_testsrc_vulkan.c vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_TESTSRC_FILTER":            "vsrc_testsrc.c"}' \
  '{"CONFIG_TESTSRC2_FILTER":           "vsrc_testsrc.c"}' \
  '{"CONFIG_YUVTESTSRC_FILTER":         "vsrc_testsrc.c"}' \
  '{"CONFIG_ZONEPLATE_FILTER":          "vsrc_testsrc.c"}' \
  '{"CONFIG_NULLSINK_FILTER":           "vsink_nullsink.c"}' \
  '{"CONFIG_A3DSCOPE_FILTER":           "avf_a3dscope.c"}' \
  '{"CONFIG_ABITSCOPE_FILTER":          "avf_abitscope.c"}' \
  '{"CONFIG_ADRAWGRAPH_FILTER":         "f_drawgraph.c"}' \
  '{"CONFIG_AGRAPHMONITOR_FILTER":      "f_graphmonitor.c"}' \
  '{"CONFIG_AHISTOGRAM_FILTER":         "avf_ahistogram.c"}' \
  '{"CONFIG_APHASEMETER_FILTER":        "avf_aphasemeter.c"}' \
  '{"CONFIG_AVECTORSCOPE_FILTER":       "avf_avectorscope.c"}' \
  '{"CONFIG_CONCAT_FILTER":             "avf_concat.c"}' \
  '{"CONFIG_SHOWCQT_FILTER":            "avf_showcqt.c lswsutils.c lavfutils.c"}' \
  '{"CONFIG_SHOWCWT_FILTER":            "avf_showcwt.c"}' \
  '{"CONFIG_SHOWFREQS_FILTER":          "avf_showfreqs.c"}' \
  '{"CONFIG_SHOWSPATIAL_FILTER":        "avf_showspatial.c"}' \
  '{"CONFIG_SHOWSPECTRUM_FILTER":       "avf_showspectrum.c"}' \
  '{"CONFIG_SHOWSPECTRUMPIC_FILTER":    "avf_showspectrum.c"}' \
  '{"CONFIG_SHOWVOLUME_FILTER":         "avf_showvolume.c"}' \
  '{"CONFIG_SHOWWAVES_FILTER":          "avf_showwaves.c"}' \
  '{"CONFIG_SHOWWAVESPIC_FILTER":       "avf_showwaves.c"}' \
  '{"CONFIG_SPECTRUMSYNTH_FILTER":      "vaf_spectrumsynth.c"}' \
  '{"CONFIG_AVSYNCTEST_FILTER":         "src_avsynctest.c"}' \
  '{"CONFIG_AMOVIE_FILTER":             "src_movie.c"}' \
  '{"CONFIG_MOVIE_FILTER":              "src_movie.c"}' \
  '{"CONFIG_LIBGLSLANG":                "vulkan_glslang.c"}' \
  '{"CONFIG_LIBSHADERC":                "vulkan_shaderc.c"}' \
  '{"HAVE_GNU_WINDRES":                 "avfilterres.rc"}' \
  '{"CONFIG_LCMS2":                     "fflcms2.c"}' \
  '{"CONFIG_LIBVIDSTAB":                "vidstabutils.c"}' \
  '{"CONFIG_QSVVPP":                    "qsvvpp.c stack_internal.c"}' \
  '{"CONFIG_OPENCL":                    "opencl.c"}' \
  '{"CONFIG_VAAPI":                     "vaapi_vpp.c stack_internal.c"}' \
  '{"CONFIG_VULKAN":                    "vulkan.c vulkan_filter.c"}' \
  '{"CONFIG_LIBSHADERC":                "vulkan_spirv.h"}' \
  '{"CONFIG_LIBGLSLANG":                "vulkan_spirv.h"}' \
  '{"CONFIG_SCENE_SAD":                 "x86/scene_sad_init.c"}' \
  '{"CONFIG_AFIR_FILTER":               "x86/af_afir_init.c"}' \
  '{"CONFIG_ANLMDN_FILTER":             "x86/af_anlmdn_init.c"}' \
  '{"CONFIG_ATADENOISE_FILTER":         "x86/vf_atadenoise_init.c"}' \
  '{"CONFIG_BLEND_FILTER":              "x86/vf_blend_init.c"}' \
  '{"CONFIG_BWDIF_FILTER":              "x86/vf_bwdif_init.c"}' \
  '{"CONFIG_COLORSPACE_FILTER":         "x86/colorspacedsp_init.c"}' \
  '{"CONFIG_CONVOLUTION_FILTER":        "x86/vf_convolution_init.c"}' \
  '{"CONFIG_EQ_FILTER":                 "x86/vf_eq_init.c"}' \
  '{"CONFIG_FSPP_FILTER":               "x86/vf_fspp_init.c"}' \
  '{"CONFIG_GBLUR_FILTER":              "x86/vf_gblur_init.c"}' \
  '{"CONFIG_GRADFUN_FILTER":            "x86/vf_gradfun_init.c"}' \
  '{"CONFIG_FRAMERATE_FILTER":          "x86/vf_framerate_init.c"}' \
  '{"CONFIG_HFLIP_FILTER":              "x86/vf_hflip_init.c"}' \
  '{"CONFIG_HQDN3D_FILTER":             "x86/vf_hqdn3d_init.c"}' \
  '{"CONFIG_IDET_FILTER":               "x86/vf_idet_init.c"}' \
  '{"CONFIG_INTERLACE_FILTER":          "x86/vf_tinterlace_init.c"}' \
  '{"CONFIG_LIMITER_FILTER":            "x86/vf_limiter_init.c"}' \
  '{"CONFIG_LUT3D_FILTER":              "x86/vf_lut3d_init.c"}' \
  '{"CONFIG_MASKEDCLAMP_FILTER":        "x86/vf_maskedclamp_init.c"}' \
  '{"CONFIG_MASKEDMERGE_FILTER":        "x86/vf_maskedmerge_init.c"}' \
  '{"CONFIG_NLMEANS_FILTER":            "x86/vf_nlmeans_init.c"}' \
  '{"CONFIG_NOISE_FILTER":              "x86/vf_noise.c"}' \
  '{"CONFIG_OVERLAY_FILTER":            "x86/vf_overlay_init.c"}' \
  '{"CONFIG_PP7_FILTER":                "x86/vf_pp7_init.c"}' \
  '{"CONFIG_PSNR_FILTER":               "x86/vf_psnr_init.c"}' \
  '{"CONFIG_PULLUP_FILTER":             "x86/vf_pullup_init.c"}' \
  '{"CONFIG_REMOVEGRAIN_FILTER":        "x86/vf_removegrain_init.c"}' \
  '{"CONFIG_SHOWCQT_FILTER":            "x86/avf_showcqt_init.c"}' \
  '{"CONFIG_SPP_FILTER":                "x86/vf_spp.c"}' \
  '{"CONFIG_SSIM_FILTER":               "x86/vf_ssim_init.c"}' \
  '{"CONFIG_STEREO3D_FILTER":           "x86/vf_stereo3d_init.c"}' \
  '{"CONFIG_TBLEND_FILTER":             "x86/vf_blend_init.c"}' \
  '{"CONFIG_THRESHOLD_FILTER":          "x86/vf_threshold_init.c"}' \
  '{"CONFIG_TINTERLACE_FILTER":         "x86/vf_tinterlace_init.c"}' \
  '{"CONFIG_TRANSPOSE_FILTER":          "x86/vf_transpose_init.c"}' \
  '{"CONFIG_VOLUME_FILTER":             "x86/af_volume_init.c"}' \
  '{"CONFIG_V360_FILTER":               "x86/vf_v360_init.c"}' \
  '{"CONFIG_W3FDIF_FILTER":             "x86/vf_w3fdif_init.c"}' \
  '{"CONFIG_YADIF_FILTER":              "x86/vf_yadif_init.c"}' \
  '{"CONFIG_SCENE_SAD":                 "x86/scene_sad.asm"}' \
  '{"CONFIG_AFIR_FILTER":               "x86/af_afir.asm"}' \
  '{"CONFIG_ANLMDN_FILTER":             "x86/af_anlmdn.asm"}' \
  '{"CONFIG_ATADENOISE_FILTER":         "x86/vf_atadenoise.asm"}' \
  '{"CONFIG_BLEND_FILTER":              "x86/vf_blend.asm"}' \
  '{"CONFIG_BWDIF_FILTER":              "x86/vf_bwdif.asm"}' \
  '{"CONFIG_COLORSPACE_FILTER":         "x86/colorspacedsp.asm"}' \
  '{"CONFIG_CONVOLUTION_FILTER":        "x86/vf_convolution.asm"}' \
  '{"CONFIG_EQ_FILTER":                 "x86/vf_eq.asm"}' \
  '{"CONFIG_FRAMERATE_FILTER":          "x86/vf_framerate.asm"}' \
  '{"CONFIG_FSPP_FILTER":               "x86/vf_fspp.asm"}' \
  '{"CONFIG_GBLUR_FILTER":              "x86/vf_gblur.asm"}' \
  '{"CONFIG_GRADFUN_FILTER":            "x86/vf_gradfun.asm"}' \
  '{"CONFIG_HFLIP_FILTER":              "x86/vf_hflip.asm"}' \
  '{"CONFIG_HQDN3D_FILTER":             "x86/vf_hqdn3d.asm"}' \
  '{"CONFIG_IDET_FILTER":               "x86/vf_idet.asm"}' \
  '{"CONFIG_INTERLACE_FILTER":          "x86/vf_interlace.asm"}' \
  '{"CONFIG_LIMITER_FILTER":            "x86/vf_limiter.asm"}' \
  '{"CONFIG_LUT3D_FILTER":              "x86/vf_lut3d.asm"}' \
  '{"CONFIG_MASKEDCLAMP_FILTER":        "x86/vf_maskedclamp.asm"}' \
  '{"CONFIG_MASKEDMERGE_FILTER":        "x86/vf_maskedmerge.asm"}' \
  '{"CONFIG_NLMEANS_FILTER":            "x86/vf_nlmeans.asm"}' \
  '{"CONFIG_OVERLAY_FILTER":            "x86/vf_overlay.asm"}' \
  '{"CONFIG_PP7_FILTER":                "x86/vf_pp7.asm"}' \
  '{"CONFIG_PSNR_FILTER":               "x86/vf_psnr.asm"}' \
  '{"CONFIG_PULLUP_FILTER":             "x86/vf_pullup.asm"}' \
  '{"CONFIG_REMOVEGRAIN_FILTER":        "x86/vf_removegrain.asm"}' \
  '{"CONFIG_SHOWCQT_FILTER":            "x86/avf_showcqt.asm"}' \
  '{"CONFIG_SSIM_FILTER":               "x86/vf_ssim.asm"}' \
  '{"CONFIG_STEREO3D_FILTER":           "x86/vf_stereo3d.asm"}' \
  '{"CONFIG_TBLEND_FILTER":             "x86/vf_blend.asm"}' \
  '{"CONFIG_THRESHOLD_FILTER":          "x86/vf_threshold.asm"}' \
  '{"CONFIG_TINTERLACE_FILTER":         "x86/vf_interlace.asm"}' \
  '{"CONFIG_TRANSPOSE_FILTER":          "x86/vf_transpose.asm"}' \
  '{"CONFIG_VOLUME_FILTER":             "x86/af_volume.asm"}' \
  '{"CONFIG_V360_FILTER":               "x86/vf_v360.asm"}' \
  '{"CONFIG_W3FDIF_FILTER":             "x86/vf_w3fdif.asm"}' \
  '{"CONFIG_YADIF_FILTER":              "x86/vf_yadif.asm x86/yadif-16.asm x86/yadif-10.asm"}'

libavfilter/impl_target{avfilter}: $config $avutil libavfilter/h{**} libavfilter/c{**}
{{
  o = [dir_path] $directory($>)
  n = $name($o)
  s = [dir_path] $src_base/$n
  c1 = [path] $path(h{$($config: out_base)/config_components.h})
  c2 = [path] $path(h{$($config: out_base)/config.h})
  d = "$o/av_conditional.files"

  # extract all enabled "groups" (CONFIG_XXX, HAVE_XXX)
  sed -n -e 's/^#define[ ]+(CONFIG_[A-Z0-9_]+)[ ]+1/\1/p' $c1 \
    | set -w ENABLED_COMPONENTS [string_set]
  sed -n -e 's/^#define[ ]+(CONFIG_[A-Z0-9_]+)[ ]+1/\1/p' $c2 \
    | set -w ENABLED_CONFIGS [string_set]
  sed -n -e 's/^#define[ ]+(HAVE_[A-Z0-9_]+)[ ]+1/\1/p' $c2 \
    | set -w ENABLED_HAVE [string_set]

  ENABLED_GROUPS = [string_set] ( \
    $ENABLED_CONFIGS \
    $ENABLED_COMPONENTS \
    $ENABLED_HAVE \
    OBJS \
    ARCH_ \
  )

  # append enabled sources
  SRCS = [paths]
  OBJS = [paths]
  MASM = [paths]
  for str: [strings] ($all_asm $all_srcs)
    pair = [json] $json.parse($str)
    echo $member_name($pair)  | set -w groups [strings]
    echo $member_value($pair) | set -w srcs [paths]
    for src: [paths] $srcs
      dir = $string.ucase("ARCH_$directory($src)")
      enabled = [bool] true
      for group: $groups
        if (!$ENABLED_GROUPS[$group] && !$ENABLED_GROUPS[$dir])
          enabled = false
        end
      end
      if ($enabled)
        if ($extension($src) != 'asm')
          SRCS += [paths] $path.posix_representation($src)
        else
          MASM += [paths] $path.posix_representation($path.base($src).asma)
          # MASM += [paths] $path.posix_representation($path.base($src).asms)
        end
      end
    end
  end

  HDRS += [paths] $filesystem.path_search('**.h', $s)
  SRCS_ALL = [paths] $filesystem.path_search('**.c', $s)

  depdb dyndep \
    --dyn-target \
    --target-cwd $o \
    --target-what 'extracted source' \
    --target-extension-type 'cpp=cxx' \
    --target-extension-type 'asma=libua' \
    --format lines \
    --file "$d" \
    -- \
      echo ($SRCS $MASM) | tr ' ' '\n' >$d && \
      echo '' >>$d && echo $path.representation([dir_path] $o) >>$d && cat $d

  diag src ($>)

  for file: [paths] ($HDRS $SRCS $SRCS_ALL)
    src = $path.posix_string($s/$file)
    dst = $path.posix_string($o/$file)
    mkdir --no-cleanup --parents $directory($dst)
    cp --no-cleanup $src $dst
  end

  # not sure if this will work without (supposedly required) yasm
  if (!$empty($MASM))
    ml = $directory($effect($c.path))/ml64.exe
    for file: $MASM
      src = [path] $path.posix_string($s/$path.base($file).asm)
      dst = [path] $path.posix_string($o/$name($file)).lib
      mkdir --no-cleanup --parents $o/$directory($file)
      # yasm -f win64 -I./ -I.// -Ilibavfilter/x86/ -Pconfig.asm -M -o libavfilter/x86/af_volume.o libavfilter/x86/af_volume.asm
      yasm -f win64 "-I$src_base/libavfilter" "-I$test" -M -o $dst $src
      # $ml -nologo -quiet "-I$src_base/libavfilter" -Fo "$dst" -c "$src"
    end
  end
}}

# Build options.
#
out_pfx = [dir_path] $out_root/src/
src_pfx = [dir_path] $src_root/src/

c.poptions += "-I$out_pfx" "-I$src_pfx" -DBUILDING_avfilter

# System libraries
sys_libs =
switch $c.target.class, $c.target.system
{
  case 'windows', 'win32-msvc'
    sys_libs += bcrypt.lib
  case 'windows', 'mingw32'
    sys_libs += -lbcrypt
}
c.libs += $sys_libs

switch ($c.target.system)
{
  case 'win32-msvc'
  {
    c.coptions += -wd4018 -wd4146 -wd4244 -wd4305 -wd4554 -wd4133 -wd4333
    c.poptions += -DWIN32_LEAN_AND_MEAN -D_USE_MATH_DEFINES -D_CRT_SECURE_NO_WARNINGS -D_CRT_NONSTDC_NO_WARNINGS
  }
}

libs{avfilter}: def{avfilter}: include = ($c.target.system == 'win32-msvc')
def{avfilter}: libul{avfilter}

if ($c.target.system == 'mingw32')
  c.loptions += -Wl,--export-all-symbols

# Export options.
#
lib{avfilter}:
{
  c.export.poptions = "-I$out_pfx" "-I$src_pfx"
  c.export.libs = $intf_libs $sys_libs
}

# For pre-releases use the complete version to make sure they cannot
# be used in place of another pre-release or the final version. See
# the version module for details on the version.* variable values.
#
if $version.pre_release
  lib{avfilter}: bin.lib.version = "-$version.project_id"
else
  lib{avfilter}: bin.lib.version = "-$version.major.$version.minor"

# Install recreating subdirectories.
#
h{*}:
{
  install         = include/
  install.subdirs = true
}
